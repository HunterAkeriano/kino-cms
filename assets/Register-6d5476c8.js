import{d as h,c as m,a as _,_ as g,o as i,b as l,e as s,w as n,v as c,n as p,f as d,t as b,g as f}from"./index-28c2baa3.js";const u=h({id:"AuthStore",state:()=>({user:null,email:"",password:"",usedEmail:!1}),actions:{async register(){m(_,this.email,this.password).then(async o=>{this.user=o.user,this.user.email,this.password}).catch(o=>{switch(o.code){case"auth/invalid-email":this.error="errors.invalidEmail";break;case"auth/email-already-in-use":this.usedEmail=!0;break;case"auth/weak-password":this.error="errors.weakPassword";break;default:this.error="errors.signupDefault";break}})}}});const E={data(){return{errorEmail:!0,passwordError:"",passValid:!1,rePass:"",rePassErorr:!1}},mounted(){this.globalStore=u()},computed:{globalStore(){return u()}},methods:{register(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.globalStore.email)?this.errorEmail=!0:this.errorEmail=!1,this.globalStore.password!==this.rePass?this.rePassErorr=!0:this.rePassErorr=!1,!this.rePassErorr&&this.errorEmail&&!this.passValid&&(this.globalStore.usedEmail=!1,this.globalStore.register()),/[а-яА-ЯЁё]/.test(this.globalStore.password)){this.passwordError="Пароль не должен содержать русские буквы",this.passValid=!0;return}if(this.globalStore.password.length<6){this.passwordError="Пароль должен содержать не менее 6 символов",this.passValid=!0;return}this.passValid=!1,this.passwordError=""}}},w={class:"block"},v={class:"register-box mt-5"},y=s("div",{class:"register-logo"},[s("a",{href:"../../index2.html"},[s("b",null,"Kino"),f("CMS")])],-1),S={class:"card"},k={class:"card-body register-card-body"},P=s("p",{class:"login-box-msg"},"Регистрация нового пользователя",-1),x={class:"input-group mb-3"},V=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-envelope"})])],-1),A={key:0,class:"erorrEmail"},R={key:1,class:"erorrEmail"},z={class:"input-group mb-3"},C=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),U={key:2,class:"erorrPass"},B={class:"input-group mb-3"},D=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),N={key:3,class:"erorrPass"},Z={class:"row"},L={class:"col-12"};function M(o,r,T,K,e,t){return i(),l("div",w,[s("div",v,[y,s("div",S,[s("div",k,[P,s("div",null,[s("div",x,[n(s("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>t.globalStore.email=a),class:p([{error:!e.errorEmail},"form-control email"]),type:"email",placeholder:"Email"},null,2),[[c,t.globalStore.email]]),V]),e.errorEmail?d("",!0):(i(),l("h3",A,"Вы ввели неккоретный email")),t.globalStore.usedEmail?(i(),l("h3",R,"Email уже используется")):d("",!0),s("div",z,[n(s("input",{"onUpdate:modelValue":r[1]||(r[1]=a=>t.globalStore.password=a),class:p([{error:e.passValid},"form-control pass"]),type:"password",placeholder:"Password"},null,2),[[c,t.globalStore.password]]),C]),e.passwordError?(i(),l("h3",U,b(e.passwordError),1)):d("",!0),s("div",B,[n(s("input",{"onUpdate:modelValue":r[2]||(r[2]=a=>e.rePass=a),class:p([{error:e.rePassErorr},"form-control rePass"]),type:"password",placeholder:"Retype password"},null,2),[[c,e.rePass]]),D]),e.rePassErorr?(i(),l("h3",N,"Пароли не сходяться")):d("",!0),s("div",Z,[s("div",L,[s("button",{onClick:r[3]||(r[3]=(...a)=>t.register&&t.register(...a)),type:"submit",class:"btn btn-primary btn-block"},"Register")])])])])])])])}const j=g(E,[["render",M]]);export{j as default};
