import{x as r,a4 as j,w as z,J as H,e as k,r as S,o as i,g as v,u as D,n as J,m as p,h as e,y as K,H as Y,p as g,G as m,F as L,k as q,t as w,i as O,j as Q}from"./index-7201b748.js";const R=e("h2",null,"Пользователи",-1),W={class:"search-container"},X={class:"table-responsive mt-3"},Z={class:"table table-striped table-bordered table-hover"},ee={style:{cursor:"pointer"}},te=e("button",{class:"btn btn-block btn-success"},"Редактировать",-1),ne=["onClick"],se={class:"pagination"},ae=["disabled"],le=["disabled"],oe={class:"modal-dialog",role:"document"},re={class:"modal-content"},ie={class:"modal-header"},ue=e("h5",{class:"modal-title"},"Удалить пользователя?",-1),de=e("span",{"aria-hidden":"true"},"×",-1),ce=[de],ve=e("div",{class:"modal-body"}," Удалить пользователя? ",-1),be={class:"modal-footer"},me={__name:"Users",setup(fe){const f=r(!1),B=r(0),_=j(),a=r(1),h=r(5),b=r(""),C=r(!1),u=r("email"),d=r(1);function y(n){u.value===n?d.value*=-1:(u.value=n,d.value=1),a.value=1}function V(){C.value=!0}z(b,n=>{n===""&&(C.value=!1)}),H(()=>{_.getUsers()});function I(n){if(n==="man")return"Мужской";if(n==="woman")return"Женский"}const N=k(()=>{let n=_.usersList;return b.value&&C.value&&(a.value=1,n=n.filter(t=>t.email.includes(b.value))),n}),x=k(()=>{const n=u.value,t=d.value;return n==="birthday"?[...N.value].sort((l,o)=>{const s=l[n],c=o[n];if(!s)return 1*t;if(!c)return-1*t;const U=new Date(s),$=new Date(c);return isNaN(U)||isNaN($)?0:U<$?-1*t:U>$?1*t:0}):[...N.value].sort((l,o)=>{const s=l[n],c=o[n];return typeof s=="string"&&typeof c=="string"?s.localeCompare(c)*t:(s-c)*t})}),M=x.value.findIndex(n=>n.email.includes(b.value));M!==-1&&(a.value=Math.floor(M/h.value)+1);const A=k(()=>{const n=(a.value-1)*h.value,t=n+h.value;return x.value.slice(n,t)}),P=k(()=>Math.ceil(x.value.length/h.value));function E(){a.value>1&&a.value--}function F(){a.value<P.value&&a.value++}function G(n){_.deleteUser(n)}function T(n){if(n){const t=new Date(n),l=t.getDate(),o=t.getMonth()+1,s=t.getFullYear();return`${l<10?"0"+l:l}.${o<10?"0"+o:o}.${s}`}return""}return(n,t)=>{const l=S("Loader"),o=S("router-link");return i(),v(L,null,[D(_).loading?(i(),J(l,{key:0})):p("",!0),R,e("div",W,[K(e("input",{style:{width:"30%"},"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),type:"text",placeholder:"Введите email для поиска пользователя"},null,512),[[Y,b.value]]),e("button",{onClick:V,class:"btn btn-primary"},"Начать поиск")]),e("div",X,[e("table",Z,[e("tbody",null,[e("tr",ee,[e("td",{onClick:t[1]||(t[1]=s=>y("birthday"))},[g(" Дата рождения "),u.value==="birthday"?(i(),v("span",{key:0,class:m(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)]),e("td",{onClick:t[2]||(t[2]=s=>y("email"))},[g(" Email "),u.value==="email"?(i(),v("span",{key:0,class:m(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)]),e("td",{onClick:t[3]||(t[3]=s=>y("gender"))},[g(" Пол "),u.value==="gender"?(i(),v("span",{key:0,class:m(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)]),e("td",{onClick:t[4]||(t[4]=s=>y("phone"))},[g(" Телефон "),u.value==="phone"?(i(),v("span",{key:0,class:m(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)])]),(i(!0),v(L,null,q(D(A),s=>(i(),v("tr",{key:s.id},[e("td",null,w(T(s.birthday)),1),e("td",null,w(s.email),1),e("td",null,w(I(s.gender)),1),e("td",null,w(s.phone),1),e("td",null,[O(o,{to:{path:`/admin/users/${s.id}`}},{default:Q(()=>[te]),_:2},1032,["to"])]),e("td",null,[e("button",{class:"btn btn-block btn-danger",onClick:c=>{f.value=!0,B.value=s.id}},"Удалить",8,ne)])]))),128))])])]),e("div",se,[e("button",{onClick:E,disabled:a.value===1,class:"btn btn-primary"},"Назад",8,ae),e("button",{onClick:F,disabled:a.value===D(P),class:"btn btn-primary"},"Вперёд",8,le)]),e("div",{class:m(["modal fade show",{"d-block":f.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",oe,[e("div",re,[e("div",ie,[ue,e("button",{type:"button",class:"close",onClick:t[5]||(t[5]=s=>f.value=!1)},ce)]),ve,e("div",be,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[6]||(t[6]=s=>f.value=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[7]||(t[7]=s=>{G(B.value),f.value=!1})},"Да")])])])],2)],64)}}};export{me as default};
