import{d as _,c as g,a as f,_ as b,r as E,o as a,b as l,e as s,f as p,g as w,w as v,h as d,i as n,v as u,n as c,t as S}from"./index-4fee3c03.js";const h=_({id:"AuthStore",state:()=>({user:null,email:"",password:"",usedEmail:!1,trueReg:!1}),actions:{async register(){g(f,this.email,this.password).then(async i=>{this.user=i.user,this.user.email,this.password}).catch(i=>{switch(i.code){case"auth/email-already-in-use":this.usedEmail=!0;break;default:this.usedEmail=!1;break}})}}});const y={data(){return{errorEmail:!0,passwordError:"",passValid:!1,rePass:"",rePassErorr:!1,trueReg:!1}},mounted(){this.globalStore=h()},computed:{globalStore(){return h()}},methods:{async register(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.globalStore.email)?this.errorEmail=!0:this.errorEmail=!1,this.globalStore.password!==this.rePass?this.rePassErorr=!0:this.rePassErorr=!1,!this.rePassErorr&&this.errorEmail&&!this.passValid&&(this.globalStore.register(),this.globalStore.usedEmail=!1,setTimeout(this.sent,1e3)),/[а-яА-ЯЁё]/.test(this.globalStore.password)){this.passwordError="Пароль не должен содержать русские буквы",this.passValid=!0;return}if(this.globalStore.password.length<6){this.passwordError="Пароль должен содержать не менее 6 символов",this.passValid=!0;return}this.passValid=!1,this.passwordError=""},sent(){this.globalStore.usedEmail?this.trueReg=!1:(this.trueReg=!0,this.globalStore.usedEmail=!1,this.globalStore.email="",this.globalStore.password="",this.rePass="")}}},k={class:"block"},P={key:0,class:"yes"},x=s("h2",null,"Вы успешно зарегистрировались",-1),V={class:"register-box mt-5"},R=s("div",{class:"register-logo"},[s("a",{href:"../../index2.html"},[s("b",null,"Kino"),p("CMS")])],-1),A={class:"card"},C={class:"card-body register-card-body"},z=s("p",{class:"login-box-msg"},"Регистрация нового пользователя",-1),N={class:"input-group mb-3"},U=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-envelope"})])],-1),B={key:0,class:"erorrEmail"},T={key:1,class:"erorrEmail"},Z={class:"input-group mb-3"},D=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),L={key:2,class:"erorrPass"},M={class:"input-group mb-3"},K=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),W={key:3,class:"erorrPass"},j={class:"row"},q={class:"col-12"};function F(i,r,G,H,e,t){const m=E("router-link");return a(),l("div",k,[e.trueReg?(a(),l("div",P,[x,s("p",null,[p("По сколько вы успешно зарегистрировались - перейдите в "),w(m,{to:"/"},{default:v(()=>[p("авторизацию")]),_:1})])])):d("",!0),s("div",V,[R,s("div",A,[s("div",C,[z,s("div",null,[s("div",N,[n(s("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>t.globalStore.email=o),class:c([{error:!e.errorEmail},"form-control email"]),type:"email",placeholder:"Email"},null,2),[[u,t.globalStore.email]]),U]),e.errorEmail?d("",!0):(a(),l("h3",B,"Вы ввели неккоретный email")),t.globalStore.usedEmail?(a(),l("h3",T,"Email уже используется")):d("",!0),s("div",Z,[n(s("input",{"onUpdate:modelValue":r[1]||(r[1]=o=>t.globalStore.password=o),class:c([{error:e.passValid},"form-control pass"]),type:"password",placeholder:"Password"},null,2),[[u,t.globalStore.password]]),D]),e.passwordError?(a(),l("h3",L,S(e.passwordError),1)):d("",!0),s("div",M,[n(s("input",{"onUpdate:modelValue":r[2]||(r[2]=o=>e.rePass=o),class:c([{error:e.rePassErorr},"form-control rePass"]),type:"password",placeholder:"Retype password"},null,2),[[u,e.rePass]]),K]),e.rePassErorr?(a(),l("h3",W,"Пароли не сходяться")):d("",!0),s("div",j,[s("div",q,[s("button",{onClick:r[3]||(r[3]=(...o)=>t.register&&t.register(...o)),type:"submit",class:"btn btn-primary btn-block"},"Register")])])])])])])])}const J=b(y,[["render",F]]);export{J as default};
