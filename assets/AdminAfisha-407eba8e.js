import{_ as lt,V as st,C as at,f as ot,d as nt,x as f,e as it,r as dt,o as s,g as a,u as o,n as ut,m as u,h as t,F as x,k as $,y as C,H as A,z as O,t as _,G as g,A as ct,B as vt}from"./index-c13c7cc8.js";const i=T=>(ct("data-v-de4d2d12"),T=T(),vt(),T),rt=i(()=>t("h2",null,"Афиша",-1)),pt={class:"table table-striped table-bordered table-hover"},mt=i(()=>t("tr",null,[t("td",null,"Дата"),t("td",null,"Информация"),t("td")],-1)),ft={style:{display:"flex","flex-direction":"column"}},_t={style:{width:"100%"}},yt=i(()=>t("tr",null,[t("td",null," Время"),t("td",null," Кинотеатр"),t("td",null," Зал"),t("td",null,"Фильм"),t("td",null,"Цена"),t("td",null,"Тип")],-1)),bt=["onClick"],ht=["onClick"],kt={class:"modal-dialog",role:"document"},xt={class:"modal-content"},Ct={class:"modal-header"},gt=i(()=>t("h5",{class:"modal-title"},"Удалить этот сеанс?? ",-1)),$t=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),wt=[$t],Dt=i(()=>t("div",{class:"modal-body"}," Вы действительно хотите удалить этот сеанс?? ",-1)),At={class:"modal-footer"},It={class:"modal-dialog",role:"document",style:{"max-width":"1000px"}},Ft={class:"modal-content"},St={class:"modal-header"},Vt=i(()=>t("h5",{class:"modal-title"},"Изменения сеанса ",-1)),zt=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),Ut=[zt],Tt={class:"modal-body",style:{width:"100%"}},Mt={class:"time"},Bt=i(()=>t("h6",null,"Текущее время показа:",-1)),Lt={class:"film mt-2"},Zt=i(()=>t("h6",null,"Выбранный фильм:",-1)),Et={key:0,class:"date mt-3",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},Nt=i(()=>t("h4",null,"Выберите фильм",-1)),Gt={class:"films"},Ht=["onClick"],Ot={class:"time mt-3"},Rt=i(()=>t("h6",null,"Тип фильма",-1)),Wt={key:0,class:"date mt-5"},Yt={class:"type mt-3",style:{display:"flex",gap:"20px"}},jt=i(()=>t("label",{for:"type"},"Тип показа",-1)),qt={key:0,value:"2D"},Jt={key:1,value:"3D"},Kt={key:2,value:"Imax"},Pt={class:"time mt-3"},Qt=i(()=>t("h6",null,"Цена:",-1)),Xt={class:"modal-footer"},te=["onClick"],ee=["onClick"],le={class:"modal-dialog",role:"document"},se={class:"modal-content"},ae={class:"modal-header"},oe=i(()=>t("h5",{class:"modal-title"},"Удалить это расписание?? ",-1)),ne=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),ie=[ne],de=i(()=>t("div",{class:"modal-body"}," Вы действительно хотите удалить это расписание?? ",-1)),ue={class:"modal-footer"},ce={key:1,class:"date mt-5"},ve=i(()=>t("h4",null,"Выберите дату",-1)),re=["min"],pe={key:2,class:"date mt-5"},me=i(()=>t("h4",null,"Выберите кинотеатр и зал",-1)),fe={style:{display:"flex",gap:"40px"},class:"cinoteatr"},_e=["onClick"],ye={key:0,class:"zal"},be={class:"flex",style:{display:"flex",gap:"20px"}},he=["onClick"],ke={key:3,class:"date mt-5"},xe=i(()=>t("h4",null,"Выберите фильм",-1)),Ce={class:"films"},ge=["onClick"],$e={key:4,class:"date mt-5"},we=i(()=>t("h4",null,"Установите время, цену и тип фильма",-1)),De={class:"time",style:{display:"flex",gap:"20px"}},Ae=i(()=>t("label",{for:"time"},"Время",-1)),Ie={class:"pay mt-3",style:{display:"flex",gap:"20px"}},Fe=i(()=>t("label",{for:"pay"},"Цена",-1)),Se={class:"type mt-3",style:{display:"flex",gap:"20px"}},Ve=i(()=>t("label",{for:"type"},"Тип показа",-1)),ze={key:0,value:"2D"},Ue={key:1,value:"3D"},Te={key:2,value:"Imax"},Me={key:5,class:"date mt-5"},Be=i(()=>t("h4",null,"Выберите кинотеатр и зал",-1)),Le={style:{display:"flex",gap:"40px"},class:"cinoteatr"},Ze=["onClick"],Ee={key:0,class:"zal"},Ne={class:"flex",style:{display:"flex",gap:"20px"}},Ge=["onClick"],He={key:6,class:"date mt-5"},Oe=i(()=>t("h4",null,"Выберите фильм",-1)),Re={class:"films"},We=["onClick"],Ye={key:7,class:"date mt-5"},je=i(()=>t("h4",null,"Установите время, цену и тип фильма",-1)),qe={class:"time",style:{display:"flex",gap:"20px"}},Je=i(()=>t("label",{for:"time"},"Время",-1)),Ke={class:"pay mt-3",style:{display:"flex",gap:"20px"}},Pe=i(()=>t("label",{for:"pay"},"Цена",-1)),Qe={class:"type mt-3",style:{display:"flex",gap:"20px"}},Xe=i(()=>t("label",{for:"type"},"Тип показа",-1)),tl={key:0,value:"2D"},el={key:1,value:"3D"},ll={key:2,value:"Imax"},sl={__name:"AdminAfisha",setup(T){st();const I=at(),b=ot(),e=nt(),D=f(null),h=f(null),r=f(null),V=f(!1),m=f(null);function j(d){e.deleteIndex=d,e.deleteAfisha(),console.log(e.deleteIndex)}const q=it(()=>{const d=new Date;return d.setDate(d.getDate()),d.toISOString().split("T")[0]}),M=f(!1),B=f(!1),L=f(!1);function J(d){e.pushIndex=d,M.value=!0,console.log(e.pushIndex)}const z=f(!1),y=f(!1);function K(d,l){const w=e.afisha[l].afisha;w.length>1?(w.splice(d,1),e.pushIndex=l,e.deleteSeans()):console.log("Нельзя удалить последний элемент")}const Z=f(!1),E=f(!1),F=f(!1),N=f(!1);function P(d){if(d){const l=new Date(d),w=l.getDate(),n=l.getMonth()+1,v=l.getFullYear();return`${w<10?"0"+w:w}.${n<10?"0"+n:n}.${v}`}return""}function U(d){return b.film.find(l=>l.name===d)}function R(d){D.value=d,h.value=null,e.selectTeatr=d,e.selectZal=null}function W(d){h.value=d,e.selectZal=d}function G(d){r.value=d,e.selectFilm=d}async function Q(){e.teatr=I.teaters[e.selectTeatr].title,e.zal=I.teaters[e.selectTeatr].zal[e.selectZal].title,e.film=b.film[e.selectFilm].name,e.time=e.time,e.price=e.price,await e.createAfisha(),N.value=!1,r.value=null,h.value=null,D.value=null}async function X(){e.teatr=I.teaters[e.selectTeatr].title,e.zal=I.teaters[e.selectTeatr].zal[e.selectZal].title,e.film=b.film[e.selectFilm].name,e.time=e.time,e.price=e.price,await e.addAfisha(),r.value=null,h.value=null,D.value=null,M.value=!1,B.value=!1,L.value=!1}const S=f(!1),H=f(!1);function tt(d,l){F.value=!1,e.afisha[d].afisha[l].film=b.film[r.value].name,e.afisha[d].afisha[l].type=""}function et(d){e.pushIndex=d,e.newInfo()}return(d,l)=>{const w=dt("Loader");return s(),a(x,null,[o(e).loading?(s(),ut(w,{key:0})):u("",!0),rt,t("table",pt,[t("tbody",null,[mt,(s(!0),a(x,null,$(o(e).afisha,(n,v)=>(s(),a("tr",null,[t("td",null,_(P(n.date)),1),(s(!0),a(x,null,$(n.afisha,(p,k)=>(s(),a("td",ft,[t("table",_t,[yt,t("tr",null,[t("td",null,_(p.time),1),t("td",null,_(p.teatr),1),t("td",null,_(p.zal),1),t("td",null,_(U(p.film).title),1),t("td",null,_(p.price),1),t("td",null,_(p.type),1),t("td",null,[t("button",{class:"btn btn-block btn-success",onClick:c=>{S.value=!0,y.value=k,m.value=v}},"Изменить",8,bt)]),t("td",null,[t("button",{class:"btn btn-block btn-danger",onClick:c=>{z.value=!0,y.value=k,m.value=v}},"Удалить",8,ht)]),t("div",{class:g(["modal fade show",{"d-block":z.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",kt,[t("div",xt,[t("div",Ct,[gt,t("button",{type:"button",class:"close",onClick:l[0]||(l[0]=c=>z.value=!1)},wt)]),Dt,t("div",At,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[1]||(l[1]=c=>z.value=!1)},"Отмена"),t("button",{type:"button",class:"btn btn-danger",onClick:l[2]||(l[2]=c=>{K(y.value,m.value),z.value=!1})},"Да")])])])],2),S.value?(s(),a("div",{key:0,class:g(["modal fade show",{"d-block":S.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",It,[t("div",Ft,[t("div",St,[Vt,t("button",{type:"button",class:"close",onClick:l[3]||(l[3]=c=>S.value=!1)},Ut)]),t("div",Tt,[t("div",Mt,[Bt,C(t("input",{type:"time","onUpdate:modelValue":l[4]||(l[4]=c=>o(e).afisha[m.value].afisha[y.value].time=c)},null,512),[[A,o(e).afisha[m.value].afisha[y.value].time]])]),t("div",Lt,[Zt,t("p",null,_(U(o(e).afisha[m.value].afisha[y.value].film).title),1),t("button",{class:"btn btn-secondary",onClick:l[5]||(l[5]=c=>F.value=!0)},"Выбрать другой"),F.value?(s(),a("div",Et,[Nt,(s(!0),a(x,null,$(o(b).film,(c,Y)=>(s(),a("div",Gt,[t("p",{class:g(["p-style",{selected:r.value===Y}]),onClick:al=>G(Y)},_(c.title),11,Ht)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[6]||(l[6]=c=>tt(m.value,y.value)),class:"mt-3 btn btn-block btn-success"},"Сохранить ")):u("",!0)])):u("",!0)]),t("div",Ot,[Rt,t("p",null,_(o(e).afisha[m.value].afisha[y.value].type),1),t("button",{class:"btn btn-secondary",onClick:l[7]||(l[7]=c=>H.value=!0)},"Изменить"),H.value?(s(),a("div",Wt,[t("div",Yt,[jt,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[8]||(l[8]=c=>o(e).typeFilms=c)},[U(o(e).afisha[m.value].afisha[y.value].film).type.filmtwo?(s(),a("option",qt,"2D")):u("",!0),U(o(e).afisha[m.value].afisha[y.value].film).type.filmthre?(s(),a("option",Jt,"3D")):u("",!0),U(o(e).afisha[m.value].afisha[y.value].film).type.imax?(s(),a("option",Kt,"Imax")):u("",!0)],512),[[O,o(e).typeFilms]]),t("button",{onClick:l[9]||(l[9]=c=>{o(e).afisha[m.value].afisha[y.value].type=o(e).typeFilms,H.value=!1})},"Сохранить")])])):u("",!0)]),t("div",Pt,[Qt,C(t("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=c=>o(e).afisha[m.value].afisha[y.value].price=c)},null,512),[[A,o(e).afisha[m.value].afisha[y.value].price]])])]),t("div",Xt,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[11]||(l[11]=c=>{S.value=!1,o(e).afisha=[],o(e).getAfisha()})},"Отмена"),t("button",{type:"button",class:"btn btn-success",onClick:l[12]||(l[12]=c=>{et(m.value),S.value=!1})},"Сохранить")])])])],2)):u("",!0)])])]))),256)),t("td",null,[t("button",{class:"btn btn-block btn-success",onClick:p=>J(v)},"Добавить",8,te)]),t("td",null,[t("button",{class:"btn btn-block btn-danger",onClick:p=>{V.value=!0,m.value=v}},"Удалить",8,ee)]),t("div",{class:g(["modal fade show",{"d-block":V.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",le,[t("div",se,[t("div",ae,[oe,t("button",{type:"button",class:"close",onClick:l[13]||(l[13]=p=>V.value=!1)},ie)]),de,t("div",ue,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[14]||(l[14]=p=>V.value=!1)},"Отмена"),t("button",{type:"button",class:"btn btn-danger",onClick:l[15]||(l[15]=p=>{j(m.value),V.value=!1})},"Да")])])])],2)]))),256))])]),t("button",{class:"btn btn-block btn-success",onClick:l[16]||(l[16]=n=>Z.value=!0)},"Добавить Афишу"),Z.value?(s(),a("div",ce,[ve,C(t("input",{type:"date","onUpdate:modelValue":l[17]||(l[17]=n=>o(e).date=n),min:o(q)},null,8,re),[[A,o(e).date]]),o(e).date?(s(),a("button",{key:0,onClick:l[18]||(l[18]=n=>{Z.value=!1,E.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):u("",!0)])):u("",!0),E.value?(s(),a("div",pe,[me,(s(!0),a(x,null,$(o(I).teaters,(n,v)=>(s(),a("div",fe,[t("p",{style:{width:"300px"},class:g(["p-style",{selected:D.value===v}]),onClick:p=>R(v)},_(n.title),11,_e),D.value==v?(s(),a("div",ye,[t("div",be,[(s(!0),a(x,null,$(n.zal,(p,k)=>(s(),a("p",{class:g(["p-style",{selected:h.value===k}]),onClick:c=>W(k),key:k},_(p.title),11,he))),128))])])):u("",!0)]))),256)),h.value==0||h.value?(s(),a("button",{key:0,onClick:l[19]||(l[19]=n=>{E.value=!1,F.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):u("",!0)])):u("",!0),F.value?(s(),a("div",ke,[xe,(s(!0),a(x,null,$(o(b).film,(n,v)=>(s(),a("div",Ce,[t("p",{class:g(["p-style",{selected:r.value===v}]),onClick:p=>G(v)},_(n.title),11,ge)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[20]||(l[20]=n=>{F.value=!1,N.value=!0}),class:"mt-3 btn btn-block btn-success"},"Создать ")):u("",!0)])):u("",!0),N.value?(s(),a("div",$e,[we,t("div",De,[Ae,C(t("input",{"onUpdate:modelValue":l[21]||(l[21]=n=>o(e).time=n),type:"time",id:"time"},null,512),[[A,o(e).time]])]),t("div",Ie,[Fe,C(t("input",{"onUpdate:modelValue":l[22]||(l[22]=n=>o(e).price=n),type:"text",id:"pay"},null,512),[[A,o(e).price]])]),t("div",Se,[Ve,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[23]||(l[23]=n=>o(e).typeFilms=n)},[o(b).film[r.value].type.filmtwo?(s(),a("option",ze,"2D")):u("",!0),o(b).film[r.value].type.filmthre?(s(),a("option",Ue,"3D")):u("",!0),o(b).film[r.value].type.imax?(s(),a("option",Te,"Imax")):u("",!0)],512),[[O,o(e).typeFilms]])]),t("button",{onClick:Q,class:"mt-3 btn btn-block btn-success"},"Создать запись")])):u("",!0),M.value?(s(),a("div",Me,[Be,(s(!0),a(x,null,$(o(I).teaters,(n,v)=>(s(),a("div",Le,[t("p",{style:{width:"300px"},class:g(["p-style",{selected:D.value===v}]),onClick:p=>R(v)},_(n.title),11,Ze),D.value==v?(s(),a("div",Ee,[t("div",Ne,[(s(!0),a(x,null,$(n.zal,(p,k)=>(s(),a("p",{class:g(["p-style",{selected:h.value===k}]),onClick:c=>W(k),key:k},_(p.title),11,Ge))),128))])])):u("",!0)]))),256)),h.value==0||h.value?(s(),a("button",{key:0,onClick:l[24]||(l[24]=n=>{M.value=!1,B.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):u("",!0)])):u("",!0),B.value?(s(),a("div",He,[Oe,(s(!0),a(x,null,$(o(b).film,(n,v)=>(s(),a("div",Re,[t("p",{class:g(["p-style",{selected:r.value===v}]),onClick:p=>G(v)},_(n.title),11,We)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[25]||(l[25]=n=>{B.value=!1,L.value=!0}),class:"mt-3 btn btn-block btn-success"},"Создать ")):u("",!0)])):u("",!0),L.value?(s(),a("div",Ye,[je,t("div",qe,[Je,C(t("input",{"onUpdate:modelValue":l[26]||(l[26]=n=>o(e).time=n),type:"time",id:"time"},null,512),[[A,o(e).time]])]),t("div",Ke,[Pe,C(t("input",{"onUpdate:modelValue":l[27]||(l[27]=n=>o(e).price=n),type:"text",id:"pay"},null,512),[[A,o(e).price]])]),t("div",Qe,[Xe,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[28]||(l[28]=n=>o(e).typeFilms=n)},[o(b).film[r.value].type.filmtwo?(s(),a("option",tl,"2D")):u("",!0),o(b).film[r.value].type.filmthre?(s(),a("option",el,"3D")):u("",!0),o(b).film[r.value].type.imax?(s(),a("option",ll,"Imax")):u("",!0)],512),[[O,o(e).typeFilms]])]),t("button",{onClick:X,class:"mt-3 btn btn-block btn-success"},"Создать запись")])):u("",!0)],64)}}},nl=lt(sl,[["__scopeId","data-v-de4d2d12"]]);export{nl as default};
