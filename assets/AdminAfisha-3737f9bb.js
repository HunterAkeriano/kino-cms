import{_ as lt,T as st,L as at,f as ot,d as nt,x as f,e as it,r as ut,o as s,g as a,u as o,n as dt,m as d,h as t,F as x,k as $,y as C,C as A,z as W,t as _,D as g,A as ct,B as vt}from"./index-3d3035a8.js";const i=U=>(ct("data-v-e9d7675c"),U=U(),vt(),U),rt=i(()=>t("h2",null,"Афиша",-1)),pt={class:"table table-striped table-bordered table-hover"},mt=i(()=>t("tr",null,[t("td",null,"Дата"),t("td",null,"Информация"),t("td")],-1)),ft={style:{display:"flex","flex-direction":"column"}},_t={style:{width:"100%"}},yt=i(()=>t("tr",null,[t("td",null," Время"),t("td",null," Кинотеатр"),t("td",null," Зал"),t("td",null,"Фильм"),t("td",null,"Цена"),t("td",null,"Тип")],-1)),ht=["onClick"],bt=["onClick"],kt={class:"modal-dialog",role:"document"},xt={class:"modal-content"},Ct={class:"modal-header"},gt=i(()=>t("h5",{class:"modal-title"},"Удалить этот сеанс?? ",-1)),$t=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),wt=[$t],Dt=i(()=>t("div",{class:"modal-body"}," Вы действительно хотите удалить этот сеанс?? ",-1)),At={class:"modal-footer"},It={class:"modal-dialog",role:"document",style:{"max-width":"1000px"}},Ft={class:"modal-content"},St={class:"modal-header"},zt=i(()=>t("h5",{class:"modal-title"},"Изменения сеанса ",-1)),Vt=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),Tt=[Vt],Ut={class:"modal-body",style:{width:"100%"}},Lt={class:"time"},Mt=i(()=>t("h6",null,"Текущее время показа:",-1)),Bt={class:"film mt-2"},Zt=i(()=>t("h6",null,"Выбранный фильм:",-1)),Et={key:0,class:"date mt-3",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},Nt=i(()=>t("h4",null,"Выберите фильм",-1)),Ot={class:"films"},Rt=["onClick"],Wt={class:"time mt-3"},Yt=i(()=>t("h6",null,"Тип фильма",-1)),jt={key:0,class:"date mt-5"},qt={class:"type mt-3",style:{display:"flex",gap:"20px"}},Gt=i(()=>t("label",{for:"type"},"Тип показа",-1)),Ht={key:0,value:"2D"},Jt={key:1,value:"3D"},Kt={key:2,value:"Imax"},Pt={class:"time mt-3"},Qt=i(()=>t("h6",null,"Цена:",-1)),Xt={class:"modal-footer"},te=["onClick"],ee=["onClick"],le={class:"modal-dialog",role:"document"},se={class:"modal-content"},ae={class:"modal-header"},oe=i(()=>t("h5",{class:"modal-title"},"Удалить это расписание?? ",-1)),ne=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),ie=[ne],ue=i(()=>t("div",{class:"modal-body"}," Вы действительно хотите удалить это расписание?? ",-1)),de={class:"modal-footer"},ce={key:1,class:"date mt-5"},ve=i(()=>t("h4",null,"Выберите дату",-1)),re=["min"],pe={key:2,class:"date mt-5"},me=i(()=>t("h4",null,"Выберите кинотеатр и зал",-1)),fe={style:{display:"flex",gap:"40px"},class:"cinoteatr"},_e=["onClick"],ye={key:0,class:"zal"},he={class:"flex",style:{display:"flex",gap:"20px"}},be=["onClick"],ke={key:3,class:"date mt-5"},xe=i(()=>t("h4",null,"Выберите фильм",-1)),Ce={class:"films"},ge=["onClick"],$e={key:4,class:"date mt-5"},we=i(()=>t("h4",null,"Установите время, цену и тип фильма",-1)),De={class:"time",style:{display:"flex",gap:"20px"}},Ae=i(()=>t("label",{for:"time"},"Время",-1)),Ie={class:"pay mt-3",style:{display:"flex",gap:"20px"}},Fe=i(()=>t("label",{for:"pay"},"Цена",-1)),Se={class:"type mt-3",style:{display:"flex",gap:"20px"}},ze=i(()=>t("label",{for:"type"},"Тип показа",-1)),Ve={key:0,value:"2D"},Te={key:1,value:"3D"},Ue={key:2,value:"Imax"},Le={key:5,class:"date mt-5"},Me=i(()=>t("h4",null,"Выберите кинотеатр и зал",-1)),Be={style:{display:"flex",gap:"40px"},class:"cinoteatr"},Ze=["onClick"],Ee={key:0,class:"zal"},Ne={class:"flex",style:{display:"flex",gap:"20px"}},Oe=["onClick"],Re={key:6,class:"date mt-5"},We=i(()=>t("h4",null,"Выберите фильм",-1)),Ye={class:"films"},je=["onClick"],qe={key:7,class:"date mt-5"},Ge=i(()=>t("h4",null,"Установите время, цену и тип фильма",-1)),He={class:"time",style:{display:"flex",gap:"20px"}},Je=i(()=>t("label",{for:"time"},"Время",-1)),Ke={class:"pay mt-3",style:{display:"flex",gap:"20px"}},Pe=i(()=>t("label",{for:"pay"},"Цена",-1)),Qe={class:"type mt-3",style:{display:"flex",gap:"20px"}},Xe=i(()=>t("label",{for:"type"},"Тип показа",-1)),tl={key:0,value:"2D"},el={key:1,value:"3D"},ll={key:2,value:"Imax"},sl={__name:"AdminAfisha",setup(U){st();const I=at(),h=ot(),e=nt(),D=f(null),b=f(null),r=f(null),S=f(!1),m=f(null);function G(u){e.deleteIndex=u,e.deleteAfisha(),console.log(e.deleteIndex)}const H=it(()=>{const u=new Date;return u.setDate(u.getDate()),u.toISOString().split("T")[0]}),L=f(!1),M=f(!1),B=f(!1);function J(u){e.pushIndex=u,L.value=!0,console.log(e.pushIndex)}const z=f(!1),y=f(!1);function K(u,l){const w=e.afisha[l].afisha;w.length>1?(w.splice(u,1),e.pushIndex=l,e.deleteSeans()):console.log("Нельзя удалить последний элемент")}const Z=f(!1),E=f(!1),F=f(!1),N=f(!1);function P(u){if(u){const l=new Date(u),w=l.getDate(),n=l.getMonth()+1,v=l.getFullYear();return`${w<10?"0"+w:w}.${n<10?"0"+n:n}.${v}`}return""}function V(u){return h.film.find(l=>l.name===u)}function Y(u){D.value=u,b.value=null,e.selectTeatr=u,e.selectZal=null}function j(u){b.value=u,e.selectZal=u}function O(u){r.value=u,e.selectFilm=u}async function Q(){e.teatr=I.teaters[e.selectTeatr].title,e.zal=I.teaters[e.selectTeatr].zal[e.selectZal].title,e.film=h.film[e.selectFilm].name,e.time=e.time,e.price=e.price,await e.createAfisha(),N.value=!1,r.value=null,b.value=null,D.value=null}async function X(){e.teatr=I.teaters[e.selectTeatr].title,e.zal=I.teaters[e.selectTeatr].zal[e.selectZal].title,e.film=h.film[e.selectFilm].name,e.time=e.time,e.price=e.price,await e.addAfisha(),r.value=null,b.value=null,D.value=null,L.value=!1,M.value=!1,B.value=!1}const T=f(!1),R=f(!1);function tt(u,l){F.value=!1,e.afisha[u].afisha[l].film=h.film[r.value].name,e.afisha[u].afisha[l].type=""}function et(u){e.pushIndex=u,e.newInfo()}return(u,l)=>{const w=ut("Loader");return s(),a(x,null,[o(e).loading?(s(),dt(w,{key:0})):d("",!0),rt,t("table",pt,[t("tbody",null,[mt,(s(!0),a(x,null,$(o(e).afisha,(n,v)=>(s(),a("tr",null,[t("td",null,_(P(n.date)),1),(s(!0),a(x,null,$(n.afisha,(p,k)=>(s(),a("td",ft,[t("table",_t,[yt,t("tr",null,[t("td",null,_(p.time),1),t("td",null,_(p.teatr),1),t("td",null,_(p.zal),1),t("td",null,_(V(p.film).title),1),t("td",null,_(p.price),1),t("td",null,_(p.type),1),t("td",null,[t("button",{class:"btn btn-block btn-success",onClick:c=>{T.value=!0,y.value=k,m.value=v}},"Изменить",8,ht)]),t("td",null,[t("button",{class:"btn btn-block btn-danger",onClick:c=>{z.value=!0,y.value=k,m.value=v}},"Удалить",8,bt)]),t("div",{class:g(["modal fade show",{"d-block":z.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",kt,[t("div",xt,[t("div",Ct,[gt,t("button",{type:"button",class:"close",onClick:l[0]||(l[0]=c=>z.value=!1)},wt)]),Dt,t("div",At,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[1]||(l[1]=c=>z.value=!1)},"Отмена"),t("button",{type:"button",class:"btn btn-danger",onClick:l[2]||(l[2]=c=>{K(y.value,m.value),z.value=!1})},"Да")])])])],2),o(e).afisha[m.value]?(s(),a("div",{key:0,class:g(["modal fade show",{"d-block":T.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",It,[t("div",Ft,[t("div",St,[zt,t("button",{type:"button",class:"close",onClick:l[3]||(l[3]=c=>T.value=!1)},Tt)]),t("div",Ut,[t("div",Lt,[Mt,C(t("input",{type:"time","onUpdate:modelValue":l[4]||(l[4]=c=>o(e).afisha[m.value].afisha[y.value].time=c)},null,512),[[A,o(e).afisha[m.value].afisha[y.value].time]])]),t("div",Bt,[Zt,t("p",null,_(V(o(e).afisha[m.value].afisha[y.value].film).title),1),t("button",{class:"btn btn-secondary",onClick:l[5]||(l[5]=c=>F.value=!0)},"Выбрать другой"),F.value?(s(),a("div",Et,[Nt,(s(!0),a(x,null,$(o(h).film,(c,q)=>(s(),a("div",Ot,[t("p",{class:g(["p-style",{selected:r.value===q}]),onClick:al=>O(q)},_(c.title),11,Rt)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[6]||(l[6]=c=>tt(m.value,y.value)),class:"mt-3 btn btn-block btn-success"},"Сохранить ")):d("",!0)])):d("",!0)]),t("div",Wt,[Yt,t("p",null,_(o(e).afisha[m.value].afisha[y.value].type),1),t("button",{class:"btn btn-secondary",onClick:l[7]||(l[7]=c=>R.value=!0)},"Изменить"),R.value?(s(),a("div",jt,[t("div",qt,[Gt,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[8]||(l[8]=c=>o(e).typeFilms=c)},[V(o(e).afisha[m.value].afisha[y.value].film).type.filmtwo?(s(),a("option",Ht,"2D")):d("",!0),V(o(e).afisha[m.value].afisha[y.value].film).type.filmthre?(s(),a("option",Jt,"3D")):d("",!0),V(o(e).afisha[m.value].afisha[y.value].film).type.imax?(s(),a("option",Kt,"Imax")):d("",!0)],512),[[W,o(e).typeFilms]]),t("button",{onClick:l[9]||(l[9]=c=>{o(e).afisha[m.value].afisha[y.value].type=o(e).typeFilms,R.value=!1})},"Сохранить")])])):d("",!0)]),t("div",Pt,[Qt,C(t("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=c=>o(e).afisha[m.value].afisha[y.value].price=c)},null,512),[[A,o(e).afisha[m.value].afisha[y.value].price]])])]),t("div",Xt,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[11]||(l[11]=c=>{T.value=!1,o(e).afisha=[],o(e).getAfisha()})},"Отмена"),t("button",{type:"button",class:"btn btn-success",onClick:l[12]||(l[12]=c=>{et(m.value),T.value=!1})},"Сохранить")])])])],2)):d("",!0)])])]))),256)),t("td",null,[t("button",{class:"btn btn-block btn-success",onClick:p=>J(v)},"Добавить",8,te)]),t("td",null,[t("button",{class:"btn btn-block btn-danger",onClick:p=>{S.value=!0,m.value=v}},"Удалить",8,ee)]),t("div",{class:g(["modal fade show",{"d-block":S.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",le,[t("div",se,[t("div",ae,[oe,t("button",{type:"button",class:"close",onClick:l[13]||(l[13]=p=>S.value=!1)},ie)]),ue,t("div",de,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[14]||(l[14]=p=>S.value=!1)},"Отмена"),t("button",{type:"button",class:"btn btn-danger",onClick:l[15]||(l[15]=p=>{G(m.value),S.value=!1})},"Да")])])])],2)]))),256))])]),t("button",{class:"btn btn-block btn-success",onClick:l[16]||(l[16]=n=>Z.value=!0)},"Добавить Афишу"),Z.value?(s(),a("div",ce,[ve,C(t("input",{type:"date","onUpdate:modelValue":l[17]||(l[17]=n=>o(e).date=n),min:o(H)},null,8,re),[[A,o(e).date]]),o(e).date?(s(),a("button",{key:0,onClick:l[18]||(l[18]=n=>{Z.value=!1,E.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):d("",!0)])):d("",!0),E.value?(s(),a("div",pe,[me,(s(!0),a(x,null,$(o(I).teaters,(n,v)=>(s(),a("div",fe,[t("p",{style:{width:"300px"},class:g(["p-style",{selected:D.value===v}]),onClick:p=>Y(v)},_(n.title),11,_e),D.value==v?(s(),a("div",ye,[t("div",he,[(s(!0),a(x,null,$(n.zal,(p,k)=>(s(),a("p",{class:g(["p-style",{selected:b.value===k}]),onClick:c=>j(k),key:k},_(p.title),11,be))),128))])])):d("",!0)]))),256)),b.value==0||b.value?(s(),a("button",{key:0,onClick:l[19]||(l[19]=n=>{E.value=!1,F.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):d("",!0)])):d("",!0),F.value?(s(),a("div",ke,[xe,(s(!0),a(x,null,$(o(h).film,(n,v)=>(s(),a("div",Ce,[t("p",{class:g(["p-style",{selected:r.value===v}]),onClick:p=>O(v)},_(n.title),11,ge)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[20]||(l[20]=n=>{F.value=!1,N.value=!0}),class:"mt-3 btn btn-block btn-success"},"Создать ")):d("",!0)])):d("",!0),N.value?(s(),a("div",$e,[we,t("div",De,[Ae,C(t("input",{"onUpdate:modelValue":l[21]||(l[21]=n=>o(e).time=n),type:"time",id:"time"},null,512),[[A,o(e).time]])]),t("div",Ie,[Fe,C(t("input",{"onUpdate:modelValue":l[22]||(l[22]=n=>o(e).price=n),type:"text",id:"pay"},null,512),[[A,o(e).price]])]),t("div",Se,[ze,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[23]||(l[23]=n=>o(e).typeFilms=n)},[o(h).film[r.value].type.filmtwo?(s(),a("option",Ve,"2D")):d("",!0),o(h).film[r.value].type.filmthre?(s(),a("option",Te,"3D")):d("",!0),o(h).film[r.value].type.imax?(s(),a("option",Ue,"Imax")):d("",!0)],512),[[W,o(e).typeFilms]])]),t("button",{onClick:Q,class:"mt-3 btn btn-block btn-success"},"Создать запись")])):d("",!0),L.value?(s(),a("div",Le,[Me,(s(!0),a(x,null,$(o(I).teaters,(n,v)=>(s(),a("div",Be,[t("p",{style:{width:"300px"},class:g(["p-style",{selected:D.value===v}]),onClick:p=>Y(v)},_(n.title),11,Ze),D.value==v?(s(),a("div",Ee,[t("div",Ne,[(s(!0),a(x,null,$(n.zal,(p,k)=>(s(),a("p",{class:g(["p-style",{selected:b.value===k}]),onClick:c=>j(k),key:k},_(p.title),11,Oe))),128))])])):d("",!0)]))),256)),b.value==0||b.value?(s(),a("button",{key:0,onClick:l[24]||(l[24]=n=>{L.value=!1,M.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):d("",!0)])):d("",!0),M.value?(s(),a("div",Re,[We,(s(!0),a(x,null,$(o(h).film,(n,v)=>(s(),a("div",Ye,[t("p",{class:g(["p-style",{selected:r.value===v}]),onClick:p=>O(v)},_(n.title),11,je)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[25]||(l[25]=n=>{M.value=!1,B.value=!0}),class:"mt-3 btn btn-block btn-success"},"Создать ")):d("",!0)])):d("",!0),B.value?(s(),a("div",qe,[Ge,t("div",He,[Je,C(t("input",{"onUpdate:modelValue":l[26]||(l[26]=n=>o(e).time=n),type:"time",id:"time"},null,512),[[A,o(e).time]])]),t("div",Ke,[Pe,C(t("input",{"onUpdate:modelValue":l[27]||(l[27]=n=>o(e).price=n),type:"text",id:"pay"},null,512),[[A,o(e).price]])]),t("div",Qe,[Xe,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[28]||(l[28]=n=>o(e).typeFilms=n)},[o(h).film[r.value].type.filmtwo?(s(),a("option",tl,"2D")):d("",!0),o(h).film[r.value].type.filmthre?(s(),a("option",el,"3D")):d("",!0),o(h).film[r.value].type.imax?(s(),a("option",ll,"Imax")):d("",!0)],512),[[W,o(e).typeFilms]])]),t("button",{onClick:X,class:"mt-3 btn btn-block btn-success"},"Создать запись")])):d("",!0)],64)}}},nl=lt(sl,[["__scopeId","data-v-e9d7675c"]]);export{nl as default};
