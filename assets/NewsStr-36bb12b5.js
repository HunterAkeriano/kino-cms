import{_ as k,N as U,Q as L,q as R,v as V,r as S,o as u,d as p,u as l,i as C,l as I,e,E as a,P as N,G as c,F as h,h as w,p as D,m as F}from"./index-41d32da5.js";const i=_=>(D("data-v-edb96306"),_=_(),F(),_),j=i(()=>e("h2",null,"Создать новость",-1)),B={class:"news"},O={class:"status flex mt-3"},P=i(()=>e("label",{for:"status"},"Включить ли новость?",-1)),A={class:"date flex mt-3"},E=i(()=>e("label",{for:"data"},"Дата публикации",-1)),G={class:"name flex mt-3"},M=i(()=>e("label",{for:"name"},"Название новости",-1)),T={class:"text flex mt-3"},q=i(()=>e("label",{for:"text"},"Описание новости",-1)),z={class:"ava flex mt-3"},Q=i(()=>e("p",null,"Главная картинка",-1)),X={class:"img"},$=["src"],H={class:"add"},J=i(()=>e("label",{for:"img-top-ua"},"Загрузити фото",-1)),K={class:"photo flex mt-3"},W=i(()=>e("p",null,"Галерея",-1)),Y={class:"gallery"},Z=["onClick"],ee=i(()=>e("span",null,"X",-1)),te=[ee],se=["src"],oe={class:"add"},le=i(()=>e("label",{for:"img-bottom"},"Загрузити фото",-1)),ie={class:"trailer flex mt-3"},ne=i(()=>e("label",{for:"trailer"},"Ссылка на видео",-1)),ae={class:"seo mt-5"},de=i(()=>e("h3",null,"СЕО блок",-1)),re={class:"block flex mt-3"},ce=i(()=>e("label",{for:"url-seo"},"URL",-1)),ue={class:"block flex mt-3"},pe=i(()=>e("label",{for:"title-seo"},"title",-1)),_e={class:"block flex mt-3"},me=i(()=>e("label",{for:"keyword-seo"},"keyword",-1)),he={class:"block flex mt-3"},fe=i(()=>e("label",{for:"description-seo"},"description",-1)),we={__name:"NewsStr",setup(_){const g=U(),o=L(),f=R(new Date);f.value.setDate(f.value.getDate());function y(d){o.gallery.splice(d,1)}async function b(d){const s=d.target.files[0],n=new Image;await new Promise(t=>{n.onload=t,n.onerror=t,n.src=URL.createObjectURL(s)}),o.ava.splice(0,1,{id:0,name:"ava-"+Date.now(),image:s,url:URL.createObjectURL(s)})}async function v(d){const s=d.target.files;for(let n=0;n<s.length;n++){const t=s[n],r=new Image;await new Promise(m=>{r.onload=m,r.onerror=m,r.src=URL.createObjectURL(t)}),r.width>=1e3&&r.height>=190?o.gallery.push({id:o.gallery.length,image:t,name:"gallery-"+Date.now(),url:URL.createObjectURL(t)}):alert("Фото должно быть не меньше 1000 x 190 пикселей")}}function x(){o.createNews()}return V(()=>o.newsAdd,d=>{d&&(g.push("/admin/news"),o.newsAdd=!1)}),(d,s)=>{const n=S("Loader");return u(),p(h,null,[l(o).loading?(u(),C(n,{key:0})):I("",!0),j,e("div",B,[e("div",O,[P,a(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l(o).status=t),type:"checkbox",id:"status"},null,512),[[N,l(o).status]])]),e("div",A,[E,a(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>l(o).date=t),type:"date",id:"data"},null,512),[[c,l(o).date]])]),e("div",G,[M,a(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>l(o).title=t),style:{width:"50%"},type:"text",id:"name",placeholder:"Название новости"},null,512),[[c,l(o).title]])]),e("div",T,[q,a(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=t=>l(o).description=t),placeholder:"Описание новости",style:{width:"100%",height:"100px",resize:"none"},id:"text",cols:"30",rows:"10"},null,512),[[c,l(o).description]])]),e("div",z,[Q,(u(!0),p(h,null,w(l(o).ava,(t,r)=>(u(),p("div",X,[e("img",{src:t.url,alt:""},null,8,$)]))),256)),e("div",H,[e("input",{onChange:s[4]||(s[4]=t=>b(t)),class:"img-top-input",id:"img-top-ua",ref:"fileInput",type:"file",accept:"image/* "},null,544),J])]),e("div",K,[W,(u(!0),p(h,null,w(l(o).gallery,(t,r)=>(u(),p("div",Y,[e("div",{class:"close",onClick:m=>y(r)},te,8,Z),e("img",{src:t.url,alt:""},null,8,se)]))),256)),e("div",oe,[e("input",{onChange:s[5]||(s[5]=t=>v(t)),class:"img-top-input",id:"img-bottom",ref:"fileInput",type:"file",accept:"image/* ",multiple:""},null,544),le])]),e("div",ie,[ne,a(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>l(o).trailer=t),style:{width:"50%"},id:"trailer",type:"text",placeholder:"Ссылка на видео"},null,512),[[c,l(o).trailer]])]),e("div",ae,[de,e("div",re,[ce,a(e("input",{style:{width:"50%"},"onUpdate:modelValue":s[7]||(s[7]=t=>l(o).seo.url=t),id:"url-seo",type:"text",placeholder:"URL"},null,512),[[c,l(o).seo.url]])]),e("div",ue,[pe,a(e("input",{style:{width:"50%"},"onUpdate:modelValue":s[8]||(s[8]=t=>l(o).seo.title=t),id:"title-seo",type:"text",placeholder:"title"},null,512),[[c,l(o).seo.title]])]),e("div",_e,[me,a(e("input",{style:{width:"50%"},"onUpdate:modelValue":s[9]||(s[9]=t=>l(o).seo.keyword=t),id:"keyword-seo",type:"text",placeholder:"keyword"},null,512),[[c,l(o).seo.keyword]])]),e("div",he,[fe,a(e("input",{style:{width:"50%"},"onUpdate:modelValue":s[10]||(s[10]=t=>l(o).seo.description=t),id:"description-seo",type:"text",placeholder:"description"},null,512),[[c,l(o).seo.description]])])]),e("div",{class:"block-btn mt-5"},[e("button",{onClick:x,class:"btn btn-block btn-success"},"Создать новость")])])],64)}}},ye=k(we,[["__scopeId","data-v-edb96306"]]);export{ye as default};
