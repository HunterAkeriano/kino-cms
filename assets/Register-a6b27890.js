import{d as _,c as g,a as f,s as b,r as E,b as v,_ as w,e as R,o as l,f as o,g as s,h as p,i as S,w as y,j as n,k as d,v as u,n as c,t as k}from"./index-dd1580ff.js";const h=_({id:"AuthStore",state:()=>({user:null,email:"",password:"",usedEmail:!1,trueReg:!1}),actions:{async register(){g(f,this.email,this.password).then(async i=>{this.user=i.user;const e={email:this.user.email,password:this.password,name:"",surname:""};await b(E(v,"users","base-"+Date.now()),e)}).catch(i=>{switch(i.code){case"auth/email-already-in-use":this.usedEmail=!0;break;default:this.usedEmail=!1;break}})}}});const x={data(){return{errorEmail:!0,emailResult:!1,passResult:!1,passwordError:"",passValid:!1,rePass:"",rePassErorr:!1,trueReg:!1}},mounted(){this.globalStore=h()},computed:{globalStore(){return h()}},methods:{validPass(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.globalStore.email)?(this.errorEmail=!0,this.emailResult=!0):this.errorEmail=!1,/[а-яА-ЯЁё]/.test(this.globalStore.password)){this.passwordError="Пароль не должен содержать русские буквы",this.passValid=!0,this.passResult=!1;return}if(this.globalStore.password.length<6){this.passwordError="Пароль должен содержать не менее 6 символов",this.passValid=!0,this.passResult=!1;return}this.passResult=!0,this.passValid=!1,this.passwordError=""},register(){this.validPass(),this.globalStore.password!==this.rePass?(this.rePassErorr=!0,this.passResult=!1):this.rePassErorr=!1,this.emailResult&&this.passResult&&(this.globalStore.register(),this.globalStore.usedEmail=!1,setTimeout(this.sent,1e3))},sent(){this.globalStore.usedEmail?this.trueReg=!1:(this.trueReg=!0,this.globalStore.usedEmail=!1,this.globalStore.email="",this.globalStore.password="",this.rePass="",this.emailResult=!1,this.passResult=!1)}}},P={class:"block"},V={key:0,class:"yes"},A=s("h2",null,"Вы успешно зарегистрировались",-1),C={class:"register-box mt-5"},z=s("div",{class:"register-logo"},[s("a",{href:"../../index2.html"},[s("b",null,"Kino"),p("CMS")])],-1),N={class:"card"},U={class:"card-body register-card-body"},B=s("p",{class:"login-box-msg"},"Регистрация нового пользователя",-1),D={class:"input-group mb-3"},T=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-envelope"})])],-1),Z={key:0,class:"erorrEmail"},L={key:1,class:"erorrEmail"},M={class:"input-group mb-3"},j=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),K={key:2,class:"erorrPass"},W={class:"input-group mb-3"},q=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),F={key:3,class:"erorrPass"},G={class:"row"},H={class:"col-12"};function I(i,e,J,O,t,r){const m=R("router-link");return l(),o("div",P,[t.trueReg?(l(),o("div",V,[A,s("p",null,[p("По сколько вы успешно зарегистрировались - перейдите в "),S(m,{to:"/"},{default:y(()=>[p("авторизацию")]),_:1})])])):n("",!0),s("div",C,[z,s("div",N,[s("div",U,[B,s("div",null,[s("div",D,[d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.globalStore.email=a),class:c([{error:!t.errorEmail},"form-control email"]),type:"email",placeholder:"Email"},null,2),[[u,r.globalStore.email]]),T]),t.errorEmail?n("",!0):(l(),o("h3",Z,"Вы ввели неккоретный email")),r.globalStore.usedEmail?(l(),o("h3",L,"Email уже используется")):n("",!0),s("div",M,[d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.globalStore.password=a),class:c([{error:t.passValid},"form-control pass"]),type:"text",placeholder:"Password"},null,2),[[u,r.globalStore.password]]),j]),t.passwordError?(l(),o("h3",K,k(t.passwordError),1)):n("",!0),s("div",W,[d(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.rePass=a),class:c([{error:t.rePassErorr},"form-control rePass"]),type:"text",placeholder:"Retype password"},null,2),[[u,t.rePass]]),q]),t.rePassErorr?(l(),o("h3",F,"Пароли не сходяться")):n("",!0),s("div",G,[s("div",H,[s("button",{onClick:e[3]||(e[3]=(...a)=>r.register&&r.register(...a)),type:"submit",class:"btn btn-primary btn-block"},"Register")])])])])])])])}const X=w(x,[["render",I]]);export{X as default};
