import{_ as D,C as w,B as L,D as k,w as F,r as M,o as i,d as c,u as r,j as V,n as $,e,F as y,i as I,x as u,t as b,g as j,h as A,y as T,p as z,q as P}from"./index-4699bc59.js";const a=v=>(z("data-v-d1be07a4"),v=v(),P(),v),q=a(()=>e("h2",null,"Новости",-1)),E={class:"table-responsive"},O={class:"table table-striped table-bordered table-hover"},Y=a(()=>e("tr",null,[e("td",null,"Номер"),e("td",null,"Имя новости"),e("td",null,"Дата новости"),e("td",null,"Состояние")],-1)),G=["onClick"],H=["onClick"],J={class:"modal-dialog",role:"document"},K={class:"modal-content"},Q={class:"modal-header"},R=a(()=>e("h5",{class:"modal-title"},"Изменение состояние новости ",-1)),U=a(()=>e("span",{"aria-hidden":"true"},"×",-1)),W=[U],X=a(()=>e("div",{class:"modal-body"}," Изменить состояние данной новости? ",-1)),Z={class:"modal-footer"},ee={class:"modal-dialog",role:"document"},te={class:"modal-content"},se={class:"modal-header"},oe=a(()=>e("h5",{class:"modal-title"},"Вы уверенны что хотите удалить новость?",-1)),le=a(()=>e("span",{"aria-hidden":"true"},"×",-1)),ne=[le],ae=a(()=>e("div",{class:"modal-body"}," Вы уверенны что хотите удалить эту новость? ",-1)),de={class:"modal-footer"},ie={class:"pagination mt-5",style:{display:"flex","justify-content":"center"}},re=["onClick"],ue={key:0,class:"error-message"},ce={data(){return{showModal:!1,currentIndex:0,newsIndex:0,deleteModal:!1}}},be=Object.assign(ce,{__name:"AdminNews",setup(v){const f=w(!1),l=L();function N(s){l.statusIndex=s,console.log(s),l.newStatus()}function S(s){if(l.deleteIndex=s,l.news.length===1)return f.value=!0,setTimeout(()=>{f.value=!1},2e3),!1;for(let t=0;t<l.news.length;t++)l.news[t].id=t;l.deleteNews()}function x(s){const t=new Date(s),_=t.getDate(),p=t.getMonth()+1,o=t.getFullYear();return`${_<10?"0"+_:_}-${p<10?"0"+p:p}-${o}`}const g=w(6),n=w(1),m=k(()=>(n.value-1)*g.value),B=k(()=>{const s=m.value,t=s+g.value;return l.news.slice(s,t)}),C=k(()=>Math.ceil(l.news.length/g.value));return F(n,s=>{window.scrollTo(0,0)}),(s,t)=>{const _=M("Loader"),p=M("router-link");return i(),c(y,null,[r(l).loading?(i(),V(_,{key:0})):$("",!0),q,e("div",E,[e("table",O,[e("tbody",null,[Y,(i(!0),c(y,null,I(r(B),(o,h)=>(i(),c("tr",null,[e("td",null,b(r(m)+h+1),1),e("td",null,[j(p,{to:{path:`/admin/news-pages/${o.nameNews}`}},{default:A(()=>[T(b(o.title),1)]),_:2},1032,["to"])]),e("td",null,b(x(o.date)),1),e("td",{class:u(["font-weight-bold",{"text-success":o.status,"text-danger":!o.status}])},b(o.status?"В проекте":"Остановлена"),3),e("td",null,[e("button",{class:u(["btn btn-block",{"btn-success":!o.status,"btn-danger":o.status}]),onClick:d=>{s.showModal=!0,s.currentIndex=r(m)+h}},b(o.status?"Выключить":"Включить"),11,G)]),e("td",null,[e("button",{class:"btn btn-danger",onClick:d=>{s.newsIndex=r(m)+h,s.deleteModal=!0}},"Удалить новость",8,H)]),e("div",{class:u(["modal fade show",{"d-block":s.showModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",J,[e("div",K,[e("div",Q,[R,e("button",{type:"button",class:"close",onClick:t[0]||(t[0]=d=>s.showModal=!1)},W)]),X,e("div",Z,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=d=>s.showModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=d=>{N(s.currentIndex),s.showModal=!1})},"Да")])])])],2),e("div",{class:u(["modal fade show",{"d-block":s.deleteModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ee,[e("div",te,[e("div",se,[oe,e("button",{type:"button",class:"close",onClick:t[3]||(t[3]=d=>s.deleteModal=!1)},ne)]),ae,e("div",de,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[4]||(t[4]=d=>s.deleteModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[5]||(t[5]=d=>{S(s.newsIndex),s.deleteModal=!1})},"Да")])])])],2)]))),256))])]),e("ul",ie,[e("li",{class:u(["page-item",{disabled:n.value===1}])},[e("a",{style:{cursor:"pointer"},class:"page-link",onClick:t[6]||(t[6]=o=>n.value--)},"Предыдущая")],2),(i(!0),c(y,null,I(r(C),o=>(i(),c("li",{key:o,class:u(["page-item",{active:n.value===o}])},[e("a",{style:{cursor:"pointer"},class:"page-link",onClick:h=>n.value=o},b(o),9,re)],2))),128)),e("li",{class:u(["page-item",{disabled:n.value===r(C)}])},[e("a",{style:{cursor:"pointer"},class:"page-link",onClick:t[7]||(t[7]=o=>n.value++)},"Следующая")],2)]),f.value?(i(),c("div",ue," Вы не можете удалить последнюю новость ")):$("",!0)])],64)}}}),pe=D(be,[["__scopeId","data-v-d1be07a4"]]);export{pe as default};
