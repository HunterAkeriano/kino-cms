import{d as x,f as w,l as C,C as j,q as N,s as $,v as D,r as P,o as d,g as u,h as s,u as c,i as B,j as O,t as r,F as b,k as p,m as S,E as V,G as _}from"./index-4738f49c.js";const Z={class:"rasspisanie"},E={class:"container"},F={key:0,class:"contet pt-5",style:{background:"white",display:"flex",gap:"40px","justify-content":"space-between",height:"1000px"}},I={class:"film",style:{"max-width":"300px",width:"100%"}},R={class:"card",style:{"max-width":"300px",width:"100%"}},q={class:"img",style:{"max-width":"300px",height:"400px",width:"100%"}},G=["src"],L={class:"title"},M={class:"info",style:{display:"flex","flex-basis":"100%",width:"100%","flex-direction":"column"}},Y={class:"bar",style:{width:"100$"}},A=s("h2",null,"Информация о фильме",-1),H={class:"block"},J={class:"zal mt-5",style:{width:"100%","padding-right":"10px"}},K={class:"bar",style:{height:"40px",display:"flex",gap:"40px"}},Q=V('<div class="block" style="display:flex;align-items:center;gap:10px;"><p style="margin:0;">Зарезервировано</p><button disabled class="btn btn-block btn-danger">1</button></div><div class="block" style="display:flex;align-items:center;gap:10px;"><p style="margin:0;">Выбранное</p><button class="btn btn-block btn-success">1</button></div><div class="block" style="display:flex;align-items:center;gap:10px;"><p style="margin:0;">Свободное</p><button class="btn btn-block btn-secondary">1</button></div>',3),T={class:"block",style:{display:"flex","align-items":"center",gap:"10px"}},U=s("p",{style:{margin:"0"}},"Выбранно",-1),W={class:"btn btn-block btn-success"},X={class:"ecran mt-3",style:{width:"70%",height:"5px","border-top":"1px solid black",margin:"0 auto"}},tt=s("p",{style:{"text-align":"center"}},"Экран",-1),st={class:"zal"},et={class:"btn",style:{display:"flex",margin:"0 auto","flex-direction":"column",gap:"20px"}},at={class:"one-block",style:{display:"flex",width:"60%","justify-content":"space-between",margin:"0 auto"}},nt={style:{width:"50px",height:"40px"},class:"one"},lt=["onClick","disabled"],it={class:"two-block",style:{display:"flex","margin-top":"20px",width:"75%","justify-content":"space-between",margin:"0 auto"}},ot={style:{width:"50px",height:"40px"},class:"two"},ct=["onClick","disabled"],dt={class:"three-block",style:{display:"flex","margin-top":"20px",width:"85%","justify-content":"space-between",margin:"0 auto"}},ut={style:{width:"50px",height:"40px"},class:"one"},rt=["onClick","disabled"],bt={class:"four-block",style:{display:"flex","margin-top":"20px",width:"100%","justify-content":"space-between",margin:"0 auto"}},pt={style:{width:"50px",height:"40px"},class:"one"},ht=["onClick","disabled"],_t={class:"up mt-5"},ft=s("h5",null,"Стоимость услуги бронирования: 3грн за каждое место.",-1),vt={class:"buttons mt-3",style:{display:"flex","justify-content":"space-between"}},mt={class:"info mt-5"},zt={__name:"RasspisanieID",setup(yt){const e=x(),y=w();C(),j();const k=N();function z(l){if(l){const n=new Date(l),o=n.getDate(),i=n.getMonth()+1,t=n.getFullYear();return`${o<10?"0"+o:o}.${i<10?"0"+i:i}.${t}`}return""}function f(l){return y.film.find(n=>n.name===l)}const a=$({value:null});D(()=>{a.value=e.zakaz.findIndex(l=>l.id==k.params.id)});function h(l){l.status==="2"?(l.status="0",e.zakaz[a.value].selectedZal-=1,e.zakaz[a.value].selectedPay=e.zakaz[a.value].selectedPay-Number(e.zakaz[a.value].price)-3):(l.status="2",e.zakaz[a.value].selectedZal+=1,e.zakaz[a.value].selectedPay+=Number(e.zakaz[a.value].price)+3)}function m(l){const n=e.zakaz[a.value];let o=0;for(const i of n.info){for(const t of i.one)t.status==="2"&&(t.status="1",o+=Number(e.zakaz[a.value].price)+3);for(const t of i.two)t.status==="2"&&(t.status="1",o+=Number(e.zakaz[a.value].price)+3);for(const t of i.three)t.status==="2"&&(t.status="1",o+=Number(e.zakaz[a.value].price)+3);for(const t of i.four)t.status==="2"&&(t.status="1",o+=Number(e.zakaz[a.value].price)+3)}if(o==0){alert("Вы ничего не выбрали");return}alert(`Цена к оплате: ${o}грн, не забудьте чек`),e.zakaz[a.value].selectedPay=0,e.zakaz[a.value].selectedZal=0,g(l),e.bronya()}function g(l){for(const n of e.afisha)for(const o of n.afisha)if(o.id===l)return e.id=n.name,n.name}return(l,n)=>{const o=P("router-link");return d(),u("div",Z,[s("div",E,[c(e).zakaz[a.value]?(d(),u("div",F,[s("div",I,[s("div",R,[s("div",q,[s("img",{style:{width:"100%",height:"100%"},src:f(c(e).zakaz[a.value].film).ava[0].url,alt:""},null,8,G)]),s("div",L,[B(o,{to:{path:`/user-film/${f(c(e).zakaz[a.value].film).name}`}},{default:O(()=>[s("h2",null,r(f(c(e).zakaz[a.value].film).title),1)]),_:1},8,["to"])])])]),s("div",M,[s("div",Y,[A,s("div",H,[s("p",null,"Цена: "+r(c(e).zakaz[a.value].price)+"грн",1),s("p",null,"Дата сеанса: "+r(z(c(e).zakaz[a.value].date)),1),s("p",null,"Время сеанса: "+r(c(e).zakaz[a.value].time),1),s("p",null,"Кинотеатр: "+r(c(e).zakaz[a.value].teatr),1),s("p",null,"Зал: "+r(c(e).zakaz[a.value].zal),1)])]),s("div",J,[s("div",K,[Q,s("div",T,[U,s("button",W,r(c(e).zakaz[a.value].selectedZal),1)])]),s("div",X,[tt,s("div",st,[(d(!0),u(b,null,p(c(e).zakaz[a.value].info,i=>(d(),u("div",et,[s("div",at,[(d(!0),u(b,null,p(i.one,t=>(d(),u("div",nt,[s("button",{class:_(["btn btn-block",{"btn-secondary":t.status==="0","btn-danger":t.status==="1","btn-success":t.status==="2"}]),onClick:v=>h(t),disabled:t.status==="1"},r(t.name),11,lt)]))),256))]),s("div",it,[(d(!0),u(b,null,p(i.two,t=>(d(),u("div",ot,[s("button",{class:_(["btn btn-block",{"btn-secondary":t.status==="0","btn-danger":t.status==="1","btn-success":t.status==="2"}]),onClick:v=>h(t),disabled:t.status==="1"},r(t.name),11,ct)]))),256))]),s("div",dt,[(d(!0),u(b,null,p(i.three,t=>(d(),u("div",ut,[s("button",{class:_(["btn btn-block",{"btn-secondary":t.status==="0","btn-danger":t.status==="1","btn-success":t.status==="2"}]),onClick:v=>h(t),disabled:t.status==="1"},r(t.name),11,rt)]))),256))]),s("div",bt,[(d(!0),u(b,null,p(i.four,t=>(d(),u("div",pt,[s("button",{class:_(["btn btn-block",{"btn-secondary":t.status==="0","btn-danger":t.status==="1","btn-success":t.status==="2"}]),onClick:v=>h(t),disabled:t.status==="1"},r(t.name),11,ht)]))),256))])]))),256))]),s("div",_t,[ft,s("div",vt,[s("button",{class:"btn btn-success",onClick:n[0]||(n[0]=i=>m(c(e).zakaz[a.value].id))},"Забронировать"),s("button",{class:"btn btn-success",onClick:n[1]||(n[1]=i=>m(c(e).zakaz[a.value].id))},"Купить")]),s("div",mt,[s("h6",null,"Всего к оплате: "+r(c(e).zakaz[a.value].selectedPay)+"грн",1)])])])])])])):S("",!0)])])}}};export{zt as default};
