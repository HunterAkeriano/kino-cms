import{a0 as K,x as r,a4 as R,w as Y,e as y,r as j,o as u,g as c,u as M,n as q,m as p,h as e,y as N,H as J,p as k,G as f,F as P,k as O,D as Q,t as g}from"./index-7201b748.js";const W=e("h2",null,"Пользователи",-1),X={class:"search-container"},Z={class:"table-responsive mt-3"},ee={class:"table table-striped table-bordered table-hover"},te={style:{cursor:"pointer"}},se=e("td",null,"Выбрано",-1),ae=["onUpdate:modelValue"],ne={class:"pagination"},le=["disabled"],oe=["disabled"],re={class:"modal-dialog",role:"document"},ue={class:"modal-content"},ie={class:"modal-header"},de=e("h5",{class:"modal-title"},"Удалить пользователя?",-1),ce=e("span",{"aria-hidden":"true"},"×",-1),ve=[ce],be=e("div",{class:"modal-body"}," Удалить пользователя? ",-1),pe={class:"modal-footer"},_e={__name:"MailUser",setup(fe){const V=K(),m=r(!1),I=r(0),w=R(),n=r(1),_=r(5),v=r(""),x=r(!1);function L(){V.go(-1)}const i=r("email"),d=r(1);function h(s){i.value===s?d.value*=-1:(i.value=s,d.value=1),n.value=1}function A(){x.value=!0}Y(v,s=>{s===""&&(x.value=!1)});function E(s){if(s==="man")return"Мужской";if(s==="woman")return"Женский"}const $=y(()=>{let s=w.allUserSMS;return v.value&&x.value&&(n.value=1,s=s.filter(t=>t.email.includes(v.value))),s}),C=y(()=>{const s=i.value,t=d.value;return s==="birthday"?[...$.value].sort((o,a)=>{const l=o[s],b=a[s];if(!l)return 1*t;if(!b)return-1*t;const U=new Date(l),D=new Date(b);return isNaN(U)||isNaN(D)?0:U<D?-1*t:U>D?1*t:0}):[...$.value].sort((o,a)=>{const l=o[s],b=a[s];return typeof l=="string"&&typeof b=="string"?l.localeCompare(b)*t:(l-b)*t})}),S=C.value.findIndex(s=>s.email.includes(v.value));S!==-1&&(n.value=Math.floor(S/_.value)+1);const F=y(()=>{const s=(n.value-1)*_.value,t=s+_.value;return C.value.slice(s,t)}),B=y(()=>Math.ceil(C.value.length/_.value));function G(){n.value>1&&n.value--}function T(){n.value<B.value&&n.value++}function z(s){w.deleteUser(s)}function H(s){if(s){const t=new Date(s),o=t.getDate(),a=t.getMonth()+1,l=t.getFullYear();return`${o<10?"0"+o:o}.${a<10?"0"+a:a}.${l}`}return""}return(s,t)=>{const o=j("Loader");return u(),c(P,null,[M(w).loading?(u(),q(o,{key:0})):p("",!0),W,e("div",X,[N(e("input",{style:{width:"30%"},"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),type:"text",placeholder:"Введите email для поиска пользователя"},null,512),[[J,v.value]]),e("button",{onClick:A,class:"btn btn-primary"},"Начать поиск")]),e("div",Z,[e("table",ee,[e("tbody",null,[e("tr",te,[se,e("td",{onClick:t[1]||(t[1]=a=>h("birthday"))},[k(" Дата рождения "),i.value==="birthday"?(u(),c("span",{key:0,class:f(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)]),e("td",{onClick:t[2]||(t[2]=a=>h("email"))},[k(" Email "),i.value==="email"?(u(),c("span",{key:0,class:f(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)]),e("td",{onClick:t[3]||(t[3]=a=>h("gender"))},[k(" Пол "),i.value==="gender"?(u(),c("span",{key:0,class:f(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)]),e("td",{onClick:t[4]||(t[4]=a=>h("phone"))},[k(" Телефон "),i.value==="phone"?(u(),c("span",{key:0,class:f(d.value===1?"arrow-up":"arrow-down")},null,2)):p("",!0)])]),(u(!0),c(P,null,O(M(F),a=>(u(),c("tr",{key:a.id},[e("td",null,[N(e("input",{type:"checkbox","onUpdate:modelValue":l=>a.status=l},null,8,ae),[[Q,a.status]])]),e("td",null,g(H(a.birthday)),1),e("td",null,g(a.email),1),e("td",null,g(E(a.gender)),1),e("td",null,g(a.phone),1)]))),128))])])]),e("div",ne,[e("button",{onClick:G,disabled:n.value===1,class:"btn btn-primary"},"Назад",8,le),e("button",{onClick:T,disabled:n.value===M(B),class:"btn btn-primary"},"Вперёд",8,oe)]),e("div",{class:f(["modal fade show",{"d-block":m.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",re,[e("div",ue,[e("div",ie,[de,e("button",{type:"button",class:"close",onClick:t[5]||(t[5]=a=>m.value=!1)},ve)]),be,e("div",pe,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[6]||(t[6]=a=>m.value=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[7]||(t[7]=a=>{z(I.value),m.value=!1})},"Да")])])])],2),e("button",{class:"btn btn-block btn-success mt-5",onClick:L},"Выбрать пользователей")],64)}}};export{_e as default};
