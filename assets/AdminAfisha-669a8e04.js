import{_ as lt,a0 as st,C as at,f as nt,d as ot,x as m,e as it,r as ut,o as s,g as a,u as n,n as dt,m as d,h as t,F as x,k as $,y as C,H as D,z as O,t as _,G as g,A as ct,B as vt}from"./index-bfb3c343.js";const i=T=>(ct("data-v-b31f35ab"),T=T(),vt(),T),rt=i(()=>t("h2",null,"Афиша",-1)),pt={class:"table table-striped table-bordered table-hover"},ft=i(()=>t("tr",null,[t("td",null,"Дата"),t("td",null,"Информация"),t("td")],-1)),mt={style:{display:"flex","flex-direction":"column"}},_t={style:{width:"100%"}},bt=i(()=>t("tr",null,[t("td",null," Время"),t("td",null," Кинотеатр"),t("td",null," Зал"),t("td",null,"Фильм"),t("td",null,"Цена"),t("td",null,"Тип")],-1)),yt=["onClick"],ht=["onClick"],kt={class:"modal-dialog",role:"document"},xt={class:"modal-content"},Ct={class:"modal-header"},gt=i(()=>t("h5",{class:"modal-title"},"Удалить этот сеанс?? ",-1)),$t=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),wt=[$t],Dt=i(()=>t("div",{class:"modal-body"}," Вы действительно хотите удалить этот сеанс?? ",-1)),At={class:"modal-footer"},It={class:"modal-dialog",role:"document",style:{"max-width":"1000px"}},Ft={class:"modal-content"},St={class:"modal-header"},zt=i(()=>t("h5",{class:"modal-title"},"Изменения сеанса ",-1)),Vt=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),Ut=[Vt],Tt={class:"modal-body",style:{width:"100%"}},Mt={class:"time"},Bt=i(()=>t("h6",null,"Текущее время показа:",-1)),Lt={class:"film mt-2"},Zt=i(()=>t("h6",null,"Выбранный фильм:",-1)),Et={key:0,class:"date mt-3",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},Nt=i(()=>t("h4",null,"Выберите фильм",-1)),Gt={class:"films"},Ht=["onClick"],Ot={class:"time mt-3"},Rt=i(()=>t("h6",null,"Тип фильма",-1)),Wt={key:0,class:"date mt-5"},Yt={class:"type mt-3",style:{display:"flex",gap:"20px"}},jt=i(()=>t("label",{for:"type"},"Тип показа",-1)),qt={key:0,value:"2D"},Jt={key:1,value:"3D"},Kt={key:2,value:"Imax"},Pt={class:"time mt-3"},Qt=i(()=>t("h6",null,"Цена:",-1)),Xt={class:"modal-footer"},te=["onClick"],ee=["onClick"],le={class:"modal-dialog",role:"document"},se={class:"modal-content"},ae={class:"modal-header"},ne=i(()=>t("h5",{class:"modal-title"},"Удалить это расписание?? ",-1)),oe=i(()=>t("span",{"aria-hidden":"true"},"×",-1)),ie=[oe],ue=i(()=>t("div",{class:"modal-body"}," Вы действительно хотите удалить это расписание?? ",-1)),de={class:"modal-footer"},ce={key:1,class:"date mt-5"},ve=i(()=>t("h4",null,"Выберите дату",-1)),re=["min"],pe={key:2,class:"date mt-5"},fe=i(()=>t("h4",null,"Выберите кинотеатр и зал",-1)),me={style:{display:"flex",gap:"40px"},class:"cinoteatr"},_e=["onClick"],be={key:0,class:"zal"},ye={class:"flex",style:{display:"flex",gap:"20px"}},he=["onClick"],ke={key:3,class:"date mt-5"},xe=i(()=>t("h4",null,"Выберите фильм",-1)),Ce={class:"films"},ge=["onClick"],$e={key:4,class:"date mt-5"},we=i(()=>t("h4",null,"Установите время, цену и тип фильма",-1)),De={class:"time",style:{display:"flex",gap:"20px"}},Ae=i(()=>t("label",{for:"time"},"Время",-1)),Ie={class:"pay mt-3",style:{display:"flex",gap:"20px"}},Fe=i(()=>t("label",{for:"pay"},"Цена",-1)),Se={class:"type mt-3",style:{display:"flex",gap:"20px"}},ze=i(()=>t("label",{for:"type"},"Тип показа",-1)),Ve={key:0,value:"2D"},Ue={key:1,value:"3D"},Te={key:2,value:"Imax"},Me={key:5,class:"date mt-5"},Be=i(()=>t("h4",null,"Выберите кинотеатр и зал",-1)),Le={style:{display:"flex",gap:"40px"},class:"cinoteatr"},Ze=["onClick"],Ee={key:0,class:"zal"},Ne={class:"flex",style:{display:"flex",gap:"20px"}},Ge=["onClick"],He={key:6,class:"date mt-5"},Oe=i(()=>t("h4",null,"Выберите фильм",-1)),Re={class:"films"},We=["onClick"],Ye={key:7,class:"date mt-5"},je=i(()=>t("h4",null,"Установите время, цену и тип фильма",-1)),qe={class:"time",style:{display:"flex",gap:"20px"}},Je=i(()=>t("label",{for:"time"},"Время",-1)),Ke={class:"pay mt-3",style:{display:"flex",gap:"20px"}},Pe=i(()=>t("label",{for:"pay"},"Цена",-1)),Qe={class:"type mt-3",style:{display:"flex",gap:"20px"}},Xe=i(()=>t("label",{for:"type"},"Тип показа",-1)),tl={key:0,value:"2D"},el={key:1,value:"3D"},ll={key:2,value:"Imax"},sl={__name:"AdminAfisha",setup(T){st();const A=at(),y=nt(),e=ot(),w=m(null),h=m(null),r=m(null),z=m(!1),f=m(null);function j(u){e.deleteIndex=u,e.deleteAfisha(),console.log(e.deleteIndex)}const q=it(()=>{const u=new Date;return u.setDate(u.getDate()),u.toISOString().split("T")[0]}),M=m(!1),B=m(!1),L=m(!1);function J(u){e.pushIndex=u,M.value=!0,console.log(e.pushIndex)}const V=m(!1),b=m(!1);function K(u,l){e.afisha[l].afisha.length>1?(e.pushIndex=l,e.resultID=u,e.deleteSeans()):console.log("Нельзя удалить последний элемент")}const Z=m(!1),E=m(!1),I=m(!1),N=m(!1);function P(u){if(u){const l=new Date(u),S=l.getDate(),o=l.getMonth()+1,v=l.getFullYear();return`${S<10?"0"+S:S}.${o<10?"0"+o:o}.${v}`}return""}function U(u){return y.film.find(l=>l.name===u)}function R(u){w.value=u,h.value=null,e.selectTeatr=u,e.selectZal=null}function W(u){h.value=u,e.selectZal=u}function G(u){r.value=u,e.selectFilm=u}async function Q(){e.teatr=A.teaters[e.selectTeatr].title,e.zal=A.teaters[e.selectTeatr].zal[e.selectZal].title,e.film=y.film[e.selectFilm].name,e.time=e.time,e.price=e.price,await e.createAfisha(),N.value=!1,r.value=null,h.value=null,w.value=null}async function X(){e.teatr=A.teaters[e.selectTeatr].title,e.zal=A.teaters[e.selectTeatr].zal[e.selectZal].title,e.film=y.film[e.selectFilm].name,e.time=e.time,e.price=e.price,await e.addAfisha(),r.value=null,h.value=null,w.value=null,M.value=!1,B.value=!1,L.value=!1}const F=m(!1),H=m(!1);function tt(u,l){I.value=!1,e.afisha[u].afisha[l].film=y.film[r.value].name,e.afisha[u].afisha[l].type=""}function et(u){e.pushIndex=u,e.newInfo()}return(u,l)=>{const S=ut("Loader");return s(),a(x,null,[n(e).loading?(s(),dt(S,{key:0})):d("",!0),rt,t("table",pt,[t("tbody",null,[ft,(s(!0),a(x,null,$(n(e).afisha,(o,v)=>(s(),a("tr",null,[t("td",null,_(P(o.date)),1),(s(!0),a(x,null,$(o.afisha,(p,k)=>(s(),a("td",mt,[t("table",_t,[bt,t("tr",null,[t("td",null,_(p.time),1),t("td",null,_(p.teatr),1),t("td",null,_(p.zal),1),t("td",null,_(U(p.film).title),1),t("td",null,_(p.price),1),t("td",null,_(p.type),1),t("td",null,[t("button",{class:"btn btn-block btn-success",onClick:c=>{F.value=!0,b.value=k,f.value=v}},"Изменить",8,yt)]),t("td",null,[t("button",{class:"btn btn-block btn-danger",onClick:c=>{V.value=!0,b.value=k,f.value=v}},"Удалить",8,ht)]),t("div",{class:g(["modal fade show",{"d-block":V.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",kt,[t("div",xt,[t("div",Ct,[gt,t("button",{type:"button",class:"close",onClick:l[0]||(l[0]=c=>V.value=!1)},wt)]),Dt,t("div",At,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[1]||(l[1]=c=>V.value=!1)},"Отмена"),t("button",{type:"button",class:"btn btn-danger",onClick:l[2]||(l[2]=c=>{K(b.value,f.value),V.value=!1})},"Да")])])])],2),F.value?(s(),a("div",{key:0,class:g(["modal fade show",{"d-block":F.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",It,[t("div",Ft,[t("div",St,[zt,t("button",{type:"button",class:"close",onClick:l[3]||(l[3]=c=>F.value=!1)},Ut)]),t("div",Tt,[t("div",Mt,[Bt,C(t("input",{type:"time","onUpdate:modelValue":l[4]||(l[4]=c=>n(e).afisha[f.value].afisha[b.value].time=c)},null,512),[[D,n(e).afisha[f.value].afisha[b.value].time]])]),t("div",Lt,[Zt,t("p",null,_(U(n(e).afisha[f.value].afisha[b.value].film).title),1),t("button",{class:"btn btn-secondary",onClick:l[5]||(l[5]=c=>I.value=!0)},"Выбрать другой"),I.value?(s(),a("div",Et,[Nt,(s(!0),a(x,null,$(n(y).film,(c,Y)=>(s(),a("div",Gt,[t("p",{class:g(["p-style",{selected:r.value===Y}]),onClick:al=>G(Y)},_(c.title),11,Ht)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[6]||(l[6]=c=>tt(f.value,b.value)),class:"mt-3 btn btn-block btn-success"},"Сохранить ")):d("",!0)])):d("",!0)]),t("div",Ot,[Rt,t("p",null,_(n(e).afisha[f.value].afisha[b.value].type),1),t("button",{class:"btn btn-secondary",onClick:l[7]||(l[7]=c=>H.value=!0)},"Изменить"),H.value?(s(),a("div",Wt,[t("div",Yt,[jt,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[8]||(l[8]=c=>n(e).typeFilms=c)},[U(n(e).afisha[f.value].afisha[b.value].film).type.filmtwo?(s(),a("option",qt,"2D")):d("",!0),U(n(e).afisha[f.value].afisha[b.value].film).type.filmthre?(s(),a("option",Jt,"3D")):d("",!0),U(n(e).afisha[f.value].afisha[b.value].film).type.imax?(s(),a("option",Kt,"Imax")):d("",!0)],512),[[O,n(e).typeFilms]]),t("button",{onClick:l[9]||(l[9]=c=>{n(e).afisha[f.value].afisha[b.value].type=n(e).typeFilms,H.value=!1})},"Сохранить")])])):d("",!0)]),t("div",Pt,[Qt,C(t("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=c=>n(e).afisha[f.value].afisha[b.value].price=c)},null,512),[[D,n(e).afisha[f.value].afisha[b.value].price]])])]),t("div",Xt,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[11]||(l[11]=c=>{F.value=!1,n(e).afisha=[],n(e).getAfisha()})},"Отмена"),t("button",{type:"button",class:"btn btn-success",onClick:l[12]||(l[12]=c=>{et(f.value),F.value=!1})},"Сохранить")])])])],2)):d("",!0)])])]))),256)),t("td",null,[t("button",{class:"btn btn-block btn-success",onClick:p=>J(v)},"Добавить",8,te)]),t("td",null,[t("button",{class:"btn btn-block btn-danger",onClick:p=>{z.value=!0,f.value=v}},"Удалить",8,ee)]),t("div",{class:g(["modal fade show",{"d-block":z.value}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",le,[t("div",se,[t("div",ae,[ne,t("button",{type:"button",class:"close",onClick:l[13]||(l[13]=p=>z.value=!1)},ie)]),ue,t("div",de,[t("button",{type:"button",class:"btn btn-secondary",onClick:l[14]||(l[14]=p=>z.value=!1)},"Отмена"),t("button",{type:"button",class:"btn btn-danger",onClick:l[15]||(l[15]=p=>{j(f.value),z.value=!1})},"Да")])])])],2)]))),256))])]),t("button",{class:"btn btn-block btn-success",onClick:l[16]||(l[16]=o=>Z.value=!0)},"Добавить Афишу"),Z.value?(s(),a("div",ce,[ve,C(t("input",{type:"date","onUpdate:modelValue":l[17]||(l[17]=o=>n(e).date=o),min:n(q)},null,8,re),[[D,n(e).date]]),n(e).date?(s(),a("button",{key:0,onClick:l[18]||(l[18]=o=>{Z.value=!1,E.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):d("",!0)])):d("",!0),E.value?(s(),a("div",pe,[fe,(s(!0),a(x,null,$(n(A).teaters,(o,v)=>(s(),a("div",me,[t("p",{style:{width:"300px"},class:g(["p-style",{selected:w.value===v}]),onClick:p=>R(v)},_(o.title),11,_e),w.value==v?(s(),a("div",be,[t("div",ye,[(s(!0),a(x,null,$(o.zal,(p,k)=>(s(),a("p",{class:g(["p-style",{selected:h.value===k}]),onClick:c=>W(k),key:k},_(p.title),11,he))),128))])])):d("",!0)]))),256)),h.value==0||h.value?(s(),a("button",{key:0,onClick:l[19]||(l[19]=o=>{E.value=!1,I.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):d("",!0)])):d("",!0),I.value?(s(),a("div",ke,[xe,(s(!0),a(x,null,$(n(y).film,(o,v)=>(s(),a("div",Ce,[t("p",{class:g(["p-style",{selected:r.value===v}]),onClick:p=>G(v)},_(o.title),11,ge)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[20]||(l[20]=o=>{I.value=!1,N.value=!0}),class:"mt-3 btn btn-block btn-success"},"Создать ")):d("",!0)])):d("",!0),N.value?(s(),a("div",$e,[we,t("div",De,[Ae,C(t("input",{"onUpdate:modelValue":l[21]||(l[21]=o=>n(e).time=o),type:"time",id:"time"},null,512),[[D,n(e).time]])]),t("div",Ie,[Fe,C(t("input",{"onUpdate:modelValue":l[22]||(l[22]=o=>n(e).price=o),type:"text",id:"pay"},null,512),[[D,n(e).price]])]),t("div",Se,[ze,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[23]||(l[23]=o=>n(e).typeFilms=o)},[n(y).film[r.value].type.filmtwo?(s(),a("option",Ve,"2D")):d("",!0),n(y).film[r.value].type.filmthre?(s(),a("option",Ue,"3D")):d("",!0),n(y).film[r.value].type.imax?(s(),a("option",Te,"Imax")):d("",!0)],512),[[O,n(e).typeFilms]])]),t("button",{onClick:Q,class:"mt-3 btn btn-block btn-success"},"Создать запись")])):d("",!0),M.value?(s(),a("div",Me,[Be,(s(!0),a(x,null,$(n(A).teaters,(o,v)=>(s(),a("div",Le,[t("p",{style:{width:"300px"},class:g(["p-style",{selected:w.value===v}]),onClick:p=>R(v)},_(o.title),11,Ze),w.value==v?(s(),a("div",Ee,[t("div",Ne,[(s(!0),a(x,null,$(o.zal,(p,k)=>(s(),a("p",{class:g(["p-style",{selected:h.value===k}]),onClick:c=>W(k),key:k},_(p.title),11,Ge))),128))])])):d("",!0)]))),256)),h.value==0||h.value?(s(),a("button",{key:0,onClick:l[24]||(l[24]=o=>{M.value=!1,B.value=!0}),class:"mt-3 btn btn-block btn-success"},"Далее")):d("",!0)])):d("",!0),B.value?(s(),a("div",He,[Oe,(s(!0),a(x,null,$(n(y).film,(o,v)=>(s(),a("div",Re,[t("p",{class:g(["p-style",{selected:r.value===v}]),onClick:p=>G(v)},_(o.title),11,We)]))),256)),r.value==0||r.value?(s(),a("button",{key:0,onClick:l[25]||(l[25]=o=>{B.value=!1,L.value=!0}),class:"mt-3 btn btn-block btn-success"},"Создать ")):d("",!0)])):d("",!0),L.value?(s(),a("div",Ye,[je,t("div",qe,[Je,C(t("input",{"onUpdate:modelValue":l[26]||(l[26]=o=>n(e).time=o),type:"time",id:"time"},null,512),[[D,n(e).time]])]),t("div",Ke,[Pe,C(t("input",{"onUpdate:modelValue":l[27]||(l[27]=o=>n(e).price=o),type:"text",id:"pay"},null,512),[[D,n(e).price]])]),t("div",Qe,[Xe,C(t("select",{name:"",id:"type","onUpdate:modelValue":l[28]||(l[28]=o=>n(e).typeFilms=o)},[n(y).film[r.value].type.filmtwo?(s(),a("option",tl,"2D")):d("",!0),n(y).film[r.value].type.filmthre?(s(),a("option",el,"3D")):d("",!0),n(y).film[r.value].type.imax?(s(),a("option",ll,"Imax")):d("",!0)],512),[[O,n(e).typeFilms]])]),t("button",{onClick:X,class:"mt-3 btn btn-block btn-success"},"Создать запись")])):d("",!0)],64)}}},ol=lt(sl,[["__scopeId","data-v-b31f35ab"]]);export{ol as default};
