import{d as z,f as E,l as L,C as O,q as T,e as y,x as _,r as Y,o as n,g as o,h as e,y as v,D as S,z as A,F as g,k as b,u as h,m as C,t as u,i as B,j as I,p as G}from"./index-4738f49c.js";const H={class:"info"},J={class:"container"},K={class:"sorted pt-5",style:{"background-color":"white"}},P={class:"one"},Q=e("h2",null,"Отображать только",-1),W={class:"flex",style:{display:"flex","align-items":"center",gap:"20px"}},Z={class:"content",style:{display:"flex","align-items":"center"}},ee=e("label",{style:{margin:"0"},for:"2D"},"2D",-1),te={class:"content",style:{display:"flex","align-items":"center"}},se=e("label",{style:{margin:"0"},for:"3D"},"3D",-1),ae={class:"content",style:{display:"flex","align-items":"center"}},le=e("label",{style:{margin:"0"},for:"IMAX"},"Imax",-1),ne={class:"date",style:{display:"flex","align-items":"center",gap:"20px"}},oe=e("label",{style:{margin:"0"},for:"date"},"Дата",-1),ie=e("option",{value:"0"},"Все даты",-1),re=["value"],ue={class:"teatr",style:{display:"flex","align-items":"center",gap:"20px"}},de=e("label",{style:{margin:"0"},for:"date"},"Кинотеатры",-1),ce=e("option",{value:"0"},"Все кинотеатры",-1),fe=["value"],me={class:"film",style:{display:"flex","align-items":"center",gap:"20px"}},_e=e("label",{style:{margin:"0"},for:"date"},"Фильмы",-1),ve=e("option",{value:"0"},"Все фильмы",-1),he=["value"],pe={class:"two pt-5"},ye={class:"card mt-5"},ge={class:"table-responsive mt-3"},be={class:"table table-striped table-bordered table-hover"},De=e("tr",null,[e("td",null,"Время"),e("td",null,"Фильм"),e("td",null,"Кинотеатр"),e("td",null,"Цена в Грн"),e("td",null,"Бронировать")],-1),xe=e("button",{class:"btn btn-block btn-success"},"Бронировать",-1),ke={key:0},we=e("td",null,"К сожалению совпадений не найдено, простите нас :(",-1),Se=[we],Ae={key:0,class:"non"},Fe=e("div",{class:"table-responsive mt-3"},[e("table",{class:"table table-striped table-bordered table-hover"},[e("tbody",null,[e("tr",null,[e("td",null,"К сожалению совпадений не найдено, простите нас :(")])])])],-1),Ve=[Fe],Ie={__name:"Rasspisanie",setup(Ce){const r=z(),U=E();L();const $=O();T();function F(a){if(a){const t=new Date(a),i=t.getDate(),s=t.getMonth()+1,l=t.getFullYear(),w=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],X=t.getDay(),j=w[X];return`${i<10?"0"+i:i}.${s<10?"0"+s:s}.${l} ${j}`}return""}const q=y(()=>r.afisha.map(s=>s.afisha).flat().map(s=>s.film).filter((s,l,w)=>w.indexOf(s)===l));function x(a){return U.film.find(t=>t.name===a)}const d=_("0"),c=_(!1),f=_(!1),p=_(!1);function M(a){return a.filter(t=>m.value==="0"?!0:t.teatr===m.value.toString()).filter(t=>d.value==="0"?!0:t.film===d.value).filter(t=>!!(!c.value&&!f.value&&!p.value||c.value&&t.type==="2D"||f.value&&t.type==="3D"||p.value&&t.type==="Imax")).sort((t,i)=>{const s=t.time.split(":"),l=i.time.split(":");return s[0]-l[0]||s[1]-l[1]})}const D=_("0"),m=_("0"),N=y(()=>[...new Set(r.afisha.map(a=>a.date))]),R=y(()=>[...new Set($.teaters.map(a=>a.title))]);r.afisha.map(a=>a.afisha);const k=y(()=>p.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="Imax")):c.value&&!f.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="2D")):!c.value&&f.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="3D")):c.value&&f.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="2D"||t.type==="3D")):m.value==="0"&&d.value==="0"?r.afisha:r.afisha.filter(a=>a.afisha.filter(i=>(m.value==="0"||i.teatr===m.value.toString())&&(d.value==="0"||i.film===d.value.toString())).length>0)),V=y(()=>D.value==="0"?k.value.sort((a,t)=>new Date(a.date)-new Date(t.date)):k.value.filter(a=>a.date===D.value).sort((a,t)=>new Date(a.date)-new Date(t.date)));return(a,t)=>{const i=Y("router-link");return n(),o("div",H,[e("div",J,[e("div",K,[e("div",P,[Q,e("div",W,[e("div",Z,[ee,v(e("input",{id:"2D",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s)},null,512),[[S,c.value]])]),e("div",te,[se,v(e("input",{id:"3D",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s)},null,512),[[S,f.value]])]),e("div",ae,[le,v(e("input",{id:"IMAX",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s)},null,512),[[S,p.value]])]),e("div",ne,[oe,v(e("select",{name:"",id:"date","onUpdate:modelValue":t[3]||(t[3]=s=>D.value=s)},[ie,(n(!0),o(g,null,b(h(N),s=>(n(),o("option",{value:s},u(F(s)),9,re))),256))],512),[[A,D.value]])]),e("div",ue,[de,v(e("select",{name:"",id:"date","onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s)},[ce,(n(!0),o(g,null,b(h(R),s=>(n(),o("option",{value:s},u(s),9,fe))),256))],512),[[A,m.value]])]),e("div",me,[_e,v(e("select",{name:"",id:"date","onUpdate:modelValue":t[5]||(t[5]=s=>d.value=s)},[ve,(n(!0),o(g,null,b(h(q),s=>(n(),o("option",{value:s,key:s},u(x(s).title),9,he))),128))],512),[[A,d.value]])])])]),e("div",pe,[(n(!0),o(g,null,b(h(V),s=>(n(),o("div",ye,[e("h3",null,u(F(s.date)),1),e("div",ge,[e("table",be,[e("tbody",null,[De,(n(!0),o(g,null,b(M(s.afisha),l=>(n(),o("tr",null,[e("td",null,u(l.time),1),e("td",null,[B(i,{to:{path:`/user-film/${x(l.film).name}`}},{default:I(()=>[G(u(x(l.film).title),1)]),_:2},1032,["to"])]),e("td",null,u(l.teatr),1),e("td",null,u(l.price),1),e("td",null,[B(i,{to:{path:`/rasspisanie/${l.id}`}},{default:I(()=>[xe]),_:2},1032,["to"])])]))),256)),h(k).length<1?(n(),o("tr",ke,Se)):C("",!0)])])])]))),256)),h(V).length<1?(n(),o("div",Ae,Ve)):C("",!0)])])])])}}};export{Ie as default};
