import{d as j,f as z,l as E,C as L,q as P,w as Y,e as y,x as _,r as G,o as n,g as o,h as e,y as h,D as S,z as C,F as g,k as b,u as v,m as M,t as u,i as N,j as V,p as H}from"./index-d1ea4e37.js";const J={class:"info"},Q={class:"container"},W={class:"sorted pt-5",style:{"background-color":"white"}},Z={class:"one"},ee=e("h2",null,"Отображать только",-1),te={class:"flex",style:{display:"flex","align-items":"center",gap:"20px"}},se={class:"content",style:{display:"flex","align-items":"center"}},ae=e("label",{style:{margin:"0"},for:"2D"},"2D",-1),le={class:"content",style:{display:"flex","align-items":"center"}},ne=e("label",{style:{margin:"0"},for:"3D"},"3D",-1),oe={class:"content",style:{display:"flex","align-items":"center"}},ie=e("label",{style:{margin:"0"},for:"IMAX"},"Imax",-1),re={class:"date",style:{display:"flex","align-items":"center",gap:"20px"}},ue=e("label",{style:{margin:"0"},for:"date"},"Дата",-1),de=e("option",{value:"0"},"Все даты",-1),ce=["value"],fe={class:"teatr",style:{display:"flex","align-items":"center",gap:"20px"}},me=e("label",{style:{margin:"0"},for:"date"},"Кинотеатры",-1),_e=e("option",{value:"0"},"Все кинотеатры",-1),he=["value"],ve={class:"film",style:{display:"flex","align-items":"center",gap:"20px"}},pe=e("label",{style:{margin:"0"},for:"date"},"Фильмы",-1),ye=e("option",{value:"0"},"Все фильмы",-1),ge=["value"],be={class:"two pt-5"},De={class:"card mt-5"},xe={class:"table-responsive mt-3"},ke={class:"table table-striped table-bordered table-hover"},we=e("tr",null,[e("td",null,"Время"),e("td",null,"Фильм"),e("td",null,"Кинотеатр"),e("td",null,"Цена в Грн"),e("td",null,"Бронировать")],-1),Se=e("button",{class:"btn btn-block btn-success"},"Бронировать",-1),Ce={key:0},Ae=e("td",null,"К сожалению совпадений не найдено, простите нас :(",-1),Fe=[Ae],Ie={key:0,class:"non"},Me=e("div",{class:"table-responsive mt-3"},[e("table",{class:"table table-striped table-bordered table-hover"},[e("tbody",null,[e("tr",null,[e("td",null,"К сожалению совпадений не найдено, простите нас :(")])])])],-1),Ne=[Me],Ue={__name:"Rasspisanie",setup(Ve){const r=j(),B=z(),A=E(),U=L();P();function $(){A.lang=="0"?document.title="KINO-CMS | Рассписание":document.title="KINO-CMS | Розклад"}$(),Y(()=>A.lang,a=>{a=="0"&&(document.title="KINO-CMS | Рассписание"),a=="1"&&(document.title="KINO-CMS | Розклад")});function F(a){if(a){const t=new Date(a),i=t.getDate(),s=t.getMonth()+1,l=t.getFullYear(),w=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],T=t.getDay(),X=w[T];return`${i<10?"0"+i:i}.${s<10?"0"+s:s}.${l} ${X}`}return""}const q=y(()=>r.afisha.map(s=>s.afisha).flat().map(s=>s.film).filter((s,l,w)=>w.indexOf(s)===l));function x(a){return B.film.find(t=>t.name===a)}const d=_("0"),c=_(!1),f=_(!1),p=_(!1);function O(a){return a.filter(t=>m.value==="0"?!0:t.teatr===m.value.toString()).filter(t=>d.value==="0"?!0:t.film===d.value).filter(t=>!!(!c.value&&!f.value&&!p.value||c.value&&t.type==="2D"||f.value&&t.type==="3D"||p.value&&t.type==="Imax")).sort((t,i)=>{const s=t.time.split(":"),l=i.time.split(":");return s[0]-l[0]||s[1]-l[1]})}const D=_("0"),m=_("0"),K=y(()=>[...new Set(r.afisha.map(a=>a.date))]),R=y(()=>[...new Set(U.teaters.map(a=>a.title))]);r.afisha.map(a=>a.afisha);const k=y(()=>p.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="Imax")):c.value&&!f.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="2D")):!c.value&&f.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="3D")):c.value&&f.value?r.afisha.filter(a=>a.afisha.some(t=>t.type==="2D"||t.type==="3D")):m.value==="0"&&d.value==="0"?r.afisha:r.afisha.filter(a=>a.afisha.filter(i=>(m.value==="0"||i.teatr===m.value.toString())&&(d.value==="0"||i.film===d.value.toString())).length>0)),I=y(()=>D.value==="0"?k.value.sort((a,t)=>new Date(a.date)-new Date(t.date)):k.value.filter(a=>a.date===D.value).sort((a,t)=>new Date(a.date)-new Date(t.date)));return(a,t)=>{const i=G("router-link");return n(),o("div",J,[e("div",Q,[e("div",W,[e("div",Z,[ee,e("div",te,[e("div",se,[ae,h(e("input",{id:"2D",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s)},null,512),[[S,c.value]])]),e("div",le,[ne,h(e("input",{id:"3D",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s)},null,512),[[S,f.value]])]),e("div",oe,[ie,h(e("input",{id:"IMAX",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s)},null,512),[[S,p.value]])]),e("div",re,[ue,h(e("select",{name:"",id:"date","onUpdate:modelValue":t[3]||(t[3]=s=>D.value=s)},[de,(n(!0),o(g,null,b(v(K),s=>(n(),o("option",{value:s},u(F(s)),9,ce))),256))],512),[[C,D.value]])]),e("div",fe,[me,h(e("select",{name:"",id:"date","onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s)},[_e,(n(!0),o(g,null,b(v(R),s=>(n(),o("option",{value:s},u(s),9,he))),256))],512),[[C,m.value]])]),e("div",ve,[pe,h(e("select",{name:"",id:"date","onUpdate:modelValue":t[5]||(t[5]=s=>d.value=s)},[ye,(n(!0),o(g,null,b(v(q),s=>(n(),o("option",{value:s,key:s},u(x(s).title),9,ge))),128))],512),[[C,d.value]])])])]),e("div",be,[(n(!0),o(g,null,b(v(I),s=>(n(),o("div",De,[e("h3",null,u(F(s.date)),1),e("div",xe,[e("table",ke,[e("tbody",null,[we,(n(!0),o(g,null,b(O(s.afisha),l=>(n(),o("tr",null,[e("td",null,u(l.time),1),e("td",null,[N(i,{to:{path:`/user-film/${x(l.film).name}`}},{default:V(()=>[H(u(x(l.film).title),1)]),_:2},1032,["to"])]),e("td",null,u(l.teatr),1),e("td",null,u(l.price),1),e("td",null,[N(i,{to:{path:`/rasspisanie/${l.id}`}},{default:V(()=>[Se]),_:2},1032,["to"])])]))),256)),v(k).length<1?(n(),o("tr",Ce,Fe)):M("",!0)])])])]))),256)),v(I).length<1?(n(),o("div",Ie,Ne)):M("",!0)])])])])}}};export{Ue as default};
