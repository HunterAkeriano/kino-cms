import{q as k,R as y,r as h,o as i,d as u,u as m,i as M,l as v,e,F as f,h as C,t as r,g as $,w as I,I as N,H as c}from"./index-8078fd83.js";const L=e("h2",null,"Новости",-1),B={class:"table-responsive"},D={class:"table table-striped table-bordered table-hover"},F=e("tr",null,[e("td",null,"Номер"),e("td",null,"Имя новости"),e("td",null,"Дата новости"),e("td",null,"Состояние")],-1),S=["onClick"],V=["onClick"],x={class:"modal-dialog",role:"document"},A={class:"modal-content"},T={class:"modal-header"},j=e("h5",{class:"modal-title"},"Изменение состояние новости ",-1),q=e("span",{"aria-hidden":"true"},"×",-1),z=[q],E=e("div",{class:"modal-body"}," Изменить состояние данной новости? ",-1),H={class:"modal-footer"},O={class:"modal-dialog",role:"document"},R={class:"modal-content"},Y={class:"modal-header"},G=e("h5",{class:"modal-title"},"Вы уверенны что хотите удалить новость?",-1),J=e("span",{"aria-hidden":"true"},"×",-1),K=[J],P=e("div",{class:"modal-body"}," Вы уверенны что хотите удалить эту новость? ",-1),Q={class:"modal-footer"},U={key:0,class:"error-message"},W={data(){return{showModal:!1,currentIndex:0,newsIndex:0,deleteModal:!1}}},ee=Object.assign(W,{__name:"AdminNews",setup(X){const b=k(!1),n=y();function p(s){n.statusIndex=s,n.newStatus()}function w(s){if(n.deleteIndex=s,n.news.length===1)return b.value=!0,setTimeout(()=>{b.value=!1},2e3),!1;for(let t=0;t<n.news.length;t++)n.news[t].id=t;n.deleteNews()}function g(s){const t=new Date(s),a=t.getDate(),d=t.getMonth()+1,o=t.getFullYear();return`${a<10?"0"+a:a}-${d<10?"0"+d:d}-${o}`}return(s,t)=>{const a=h("Loader"),d=h("router-link");return i(),u(f,null,[m(n).loading?(i(),M(a,{key:0})):v("",!0),L,e("div",B,[e("table",D,[e("tbody",null,[F,(i(!0),u(f,null,C(m(n).news,(o,_)=>(i(),u("tr",null,[e("td",null,r(_+1),1),e("td",null,[$(d,{to:{path:`/admin/news-pages/${o.nameNews}`}},{default:I(()=>[N(r(o.title),1)]),_:2},1032,["to"])]),e("td",null,r(g(o.date)),1),e("td",{class:c(["font-weight-bold",{"text-success":o.status,"text-danger":!o.status}])},r(o.status?"В проекте":"Остановлена"),3),e("td",null,[e("button",{class:c(["btn btn-block",{"btn-success":!o.status,"btn-danger":o.status}]),onClick:l=>{s.showModal=!0,s.currentIndex=_}},r(o.status?"Выключить":"Включить"),11,S)]),e("td",null,[e("button",{class:"btn btn-block btn-danger",onClick:l=>{s.newsIndex=_,s.deleteModal=!0}},"Удалить новость",8,V)]),e("div",{class:c(["modal fade show",{"d-block":s.showModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",x,[e("div",A,[e("div",T,[j,e("button",{type:"button",class:"close",onClick:t[0]||(t[0]=l=>s.showModal=!1)},z)]),E,e("div",H,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=l=>s.showModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=l=>{p(s.currentIndex),s.showModal=!1})},"Да")])])])],2),e("div",{class:c(["modal fade show",{"d-block":s.deleteModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",O,[e("div",R,[e("div",Y,[G,e("button",{type:"button",class:"close",onClick:t[3]||(t[3]=l=>s.deleteModal=!1)},K)]),P,e("div",Q,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[4]||(t[4]=l=>s.deleteModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[5]||(t[5]=l=>{w(s.newsIndex),s.deleteModal=!1})},"Да")])])])],2)]))),256))])]),b.value?(i(),u("div",U," Вы не можете удалить последнюю новость ")):v("",!0)])],64)}}});export{ee as default};
