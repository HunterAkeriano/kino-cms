import{q as w,Q as y,r as b,o as a,d as i,u as _,i as g,l as m,e,F as h,h as M,t as d,g as C,w as I,I as N,H as u}from"./index-41d32da5.js";const $=e("h2",null,"Новости",-1),L={class:"table-responsive"},B={class:"table table-striped table-bordered table-hover"},S=e("tr",null,[e("td",null,"Номер"),e("td",null,"Имя новости"),e("td",null,"Дата новости"),e("td",null,"Состояние")],-1),V=["onClick"],F=["onClick"],x={class:"modal-dialog",role:"document"},A={class:"modal-content"},T={class:"modal-header"},j=e("h5",{class:"modal-title"},"Изменение состояние новости ",-1),q=e("span",{"aria-hidden":"true"},"×",-1),z=[q],D=e("div",{class:"modal-body"}," Изменить состояние данной новости? ",-1),E={class:"modal-footer"},H={class:"modal-dialog",role:"document"},O={class:"modal-content"},Q={class:"modal-header"},G=e("h5",{class:"modal-title"},"Вы уверенны что хотите удалить новость?",-1),J=e("span",{"aria-hidden":"true"},"×",-1),K=[J],P=e("div",{class:"modal-body"}," Вы уверенны что хотите удалить эту новость? ",-1),R={class:"modal-footer"},U={key:0,class:"error-message"},W={data(){return{showModal:!1,currentIndex:0,newsIndex:0,deleteModal:!1}}},Z=Object.assign(W,{__name:"AdminNews",setup(X){const r=w(!1),l=y();function v(t){l.statusIndex=t,l.newStatus()}function f(t){if(l.deleteIndex=t,l.news.length===1)return r.value=!0,setTimeout(()=>{r.value=!1},2e3),!1;l.deleteNews()}return(t,s)=>{const p=b("Loader"),k=b("router-link");return a(),i(h,null,[_(l).loading?(a(),g(p,{key:0})):m("",!0),$,e("div",L,[e("table",B,[e("tbody",null,[S,(a(!0),i(h,null,M(_(l).news,(o,c)=>(a(),i("tr",null,[e("td",null,d(o.id+1),1),e("td",null,[C(k,{to:{path:`/admin/news-pages/${o.nameNews}`}},{default:I(()=>[N(d(o.title),1)]),_:2},1032,["to"])]),e("td",null,d(o.date),1),e("td",null,d(o.status?"В проекте":"Остановлена"),1),e("td",null,[e("button",{class:u(["btn btn-block",{"btn-success":!o.status,"btn-danger":o.status}]),onClick:n=>{t.showModal=!0,t.currentIndex=c}},d(o.status?"Выключить":"Включить"),11,V)]),e("td",null,[e("button",{class:"btn btn-block btn-danger",onClick:n=>{t.newsIndex=c,t.deleteModal=!0}},"Удалить новость",8,F)]),e("div",{class:u(["modal fade show",{"d-block":t.showModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",x,[e("div",A,[e("div",T,[j,e("button",{type:"button",class:"close",onClick:s[0]||(s[0]=n=>t.showModal=!1)},z)]),D,e("div",E,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[1]||(s[1]=n=>t.showModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:s[2]||(s[2]=n=>{v(t.currentIndex),t.showModal=!1})},"Да")])])])],2),e("div",{class:u(["modal fade show",{"d-block":t.deleteModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",H,[e("div",O,[e("div",Q,[G,e("button",{type:"button",class:"close",onClick:s[3]||(s[3]=n=>t.deleteModal=!1)},K)]),P,e("div",R,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[4]||(s[4]=n=>t.deleteModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:s[5]||(s[5]=n=>{f(t.newsIndex),t.deleteModal=!1})},"Да")])])])],2)]))),256))])]),r.value?(a(),i("div",U," Вы не можете удалить последнюю новость ")):m("",!0)])],64)}}});export{Z as default};
