import{d as _,c as g,a as f,s as b,r as E,b as w,_ as v,e as S,o,f as l,g as s,h as p,i as y,w as k,j as n,k as d,v as u,n as c,t as P}from"./index-5be20ca4.js";const h=_({id:"AuthStore",state:()=>({user:null,email:"",password:"",usedEmail:!1,trueReg:!1}),actions:{async register(){g(f,this.email,this.password).then(async i=>{this.user=i.user;const e={email:this.user.email,password:this.password,name:"",surname:""};await b(E(w,"users","base-"+Date.now()),e)}).catch(i=>{switch(i.code){case"auth/email-already-in-use":this.usedEmail=!0;break;default:this.usedEmail=!1;break}})}}});const x={data(){return{errorEmail:!0,passwordError:"",passValid:!1,rePass:"",rePassErorr:!1,trueReg:!1}},mounted(){this.globalStore=h()},computed:{globalStore(){return h()}},methods:{async register(){if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.globalStore.email)?this.errorEmail=!0:this.errorEmail=!1,this.globalStore.password!==this.rePass?this.rePassErorr=!0:this.rePassErorr=!1,!this.rePassErorr&&this.errorEmail&&!this.passValid&&(this.globalStore.register(),this.globalStore.usedEmail=!1,setTimeout(this.sent,1e3)),/[а-яА-ЯЁё]/.test(this.globalStore.password)){this.passwordError="Пароль не должен содержать русские буквы",this.passValid=!0;return}if(this.globalStore.password.length<6){this.passwordError="Пароль должен содержать не менее 6 символов",this.passValid=!0;return}this.passValid=!1,this.passwordError=""},sent(){this.globalStore.usedEmail?this.trueReg=!1:(this.trueReg=!0,this.globalStore.usedEmail=!1,this.globalStore.email="",this.globalStore.password="",this.rePass="")}}},V={class:"block"},R={key:0,class:"yes"},A=s("h2",null,"Вы успешно зарегистрировались",-1),C={class:"register-box mt-5"},z=s("div",{class:"register-logo"},[s("a",{href:"../../index2.html"},[s("b",null,"Kino"),p("CMS")])],-1),N={class:"card"},U={class:"card-body register-card-body"},B=s("p",{class:"login-box-msg"},"Регистрация нового пользователя",-1),D={class:"input-group mb-3"},T=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-envelope"})])],-1),Z={key:0,class:"erorrEmail"},L={key:1,class:"erorrEmail"},M={class:"input-group mb-3"},j=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),K={key:2,class:"erorrPass"},W={class:"input-group mb-3"},q=s("div",{class:"input-group-append"},[s("div",{class:"input-group-text"},[s("span",{class:"fas fa-lock"})])],-1),F={key:3,class:"erorrPass"},G={class:"row"},H={class:"col-12"};function I(i,e,J,O,r,t){const m=S("router-link");return o(),l("div",V,[r.trueReg?(o(),l("div",R,[A,s("p",null,[p("По сколько вы успешно зарегистрировались - перейдите в "),y(m,{to:"/"},{default:k(()=>[p("авторизацию")]),_:1})])])):n("",!0),s("div",C,[z,s("div",N,[s("div",U,[B,s("div",null,[s("div",D,[d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.globalStore.email=a),class:c([{error:!r.errorEmail},"form-control email"]),type:"email",placeholder:"Email"},null,2),[[u,t.globalStore.email]]),T]),r.errorEmail?n("",!0):(o(),l("h3",Z,"Вы ввели неккоретный email")),t.globalStore.usedEmail?(o(),l("h3",L,"Email уже используется")):n("",!0),s("div",M,[d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.globalStore.password=a),class:c([{error:r.passValid},"form-control pass"]),type:"password",placeholder:"Password"},null,2),[[u,t.globalStore.password]]),j]),r.passwordError?(o(),l("h3",K,P(r.passwordError),1)):n("",!0),s("div",W,[d(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.rePass=a),class:c([{error:r.rePassErorr},"form-control rePass"]),type:"password",placeholder:"Retype password"},null,2),[[u,r.rePass]]),q]),r.rePassErorr?(o(),l("h3",F,"Пароли не сходяться")):n("",!0),s("div",G,[s("div",H,[s("button",{onClick:e[3]||(e[3]=(...a)=>t.register&&t.register(...a)),type:"submit",class:"btn btn-primary btn-block"},"Register")])])])])])])])}const X=v(x,[["render",I]]);export{X as default};
