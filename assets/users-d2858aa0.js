import{a4 as d,a5 as L,a6 as g,a7 as u,a8 as n,a9 as l,aa as p,ab as c,ac as o,ad as h,ae as m,af as f,ag as w}from"./index-2bf4f1b1.js";const y=d({id:"Users",state:()=>({loading:!1,showModal:!1,usersList:[],uploaded:!1}),actions:{async getUsers(){this.loading=!0,this.usersList=[],(await L(g(h,"users"))).forEach(e=>{this.usersList.push({id:this.usersList.length,name:e.id,email:e.data().email,password:e.data().password,user:e.data().user,fullName:e.data().fullName,phone:e.data().phone,creditCard:e.data().creditCard,address:e.data().address,gender:e.data().gender,language:e.data().language,emailChange:e.data().email,birthday:e.data().birthday,passwordChange:"",passwordCheck:""})});for(let e=0;e<this.usersList.length;e++)typeof this.usersList[e].birthday=="object"&&(this.usersList[e].birthday=new Date(this.usersList[e].birthday.seconds*1e3));this.loading=!1},async deleteUser(s){this.loading=!0;const e=u(n);l(e,this.usersList[s].email,this.usersList[s].password).then(t=>{const r=t.user;p(r).then(async()=>{await c(o(h,"users",this.usersList[s].name)),this.usersList.splice(s,1);for(let a=0;a<this.usersList.length;a++)this.usersList[a].id!==a&&(this.usersList[a].id=a)}).catch(a=>{console.log(a)})}).catch(t=>{console.log(t)}),setTimeout(()=>{this.loading=!1},1e3)},async saveUser(s){this.loading=!0,this.uploaded=!1;const e=u(n);l(e,this.usersList[s].email,this.usersList[s].password).then(async t=>{const r=t.user;r.email!==this.usersList[s].emailChange&&(this.usersList[s].email=this.usersList[s].emailChange,m(r,this.usersList[s].emailChange).catch(i=>{console.log(i)})),this.usersList[s].passwordChange!==""&&this.usersList[s].passwordChange===this.usersList[s].passwordCheck&&this.usersList[s].password!==this.usersList[s].passwordChange&&(this.usersList[s].password=this.usersList[s].passwordChange,f(r,this.usersList[s].password).catch(i=>{console.log(i)}));const a={email:this.usersList[s].email,password:this.usersList[s].password,user:this.usersList[s].user,fullName:this.usersList[s].fullName,phone:this.usersList[s].phone,creditCard:this.usersList[s].creditCard,address:this.usersList[s].address,gender:this.usersList[s].gender,language:this.usersList[s].language,birthday:this.usersList[s].birthday};await w(o(h,"users",this.usersList[s].name),a).then(()=>{this.uploaded=!0}),this.usersList[s].passwordChange="",this.usersList[s].passwordCheck=""}).catch(t=>{console.log(t)}),setTimeout(()=>{this.loading=!1},1e3)}}});export{y as u};
