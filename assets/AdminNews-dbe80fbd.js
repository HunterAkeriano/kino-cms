import{_ as M,B as C,z as I,r as p,o as r,d as b,u as v,i as $,l as f,e,F as w,h as N,t as c,g as S,w as x,x as B,s as _,p as L,m as D}from"./index-c1996a1c.js";const a=u=>(L("data-v-a1c1b874"),u=u(),D(),u),F=a(()=>e("h2",null,"Новости",-1)),V={class:"table-responsive"},A={class:"table table-striped table-bordered table-hover"},z=a(()=>e("tr",null,[e("td",null,"Номер"),e("td",null,"Имя новости"),e("td",null,"Дата новости"),e("td",null,"Состояние")],-1)),T=["onClick"],j=["onClick"],E={class:"modal-dialog",role:"document"},O={class:"modal-content"},Y={class:"modal-header"},q=a(()=>e("h5",{class:"modal-title"},"Изменение состояние новости ",-1)),G=a(()=>e("span",{"aria-hidden":"true"},"×",-1)),H=[G],J=a(()=>e("div",{class:"modal-body"}," Изменить состояние данной новости? ",-1)),K={class:"modal-footer"},P={class:"modal-dialog",role:"document"},Q={class:"modal-content"},R={class:"modal-header"},U=a(()=>e("h5",{class:"modal-title"},"Вы уверенны что хотите удалить новость?",-1)),W=a(()=>e("span",{"aria-hidden":"true"},"×",-1)),X=[W],Z=a(()=>e("div",{class:"modal-body"}," Вы уверенны что хотите удалить эту новость? ",-1)),ee={class:"modal-footer"},te={key:0,class:"error-message"},se={data(){return{showModal:!1,currentIndex:0,newsIndex:0,deleteModal:!1}}},oe=Object.assign(se,{__name:"AdminNews",setup(u){const h=C(!1),n=I();function g(s){n.statusIndex=s,n.newStatus()}function k(s){if(n.deleteIndex=s,n.news.length===1)return h.value=!0,setTimeout(()=>{h.value=!1},2e3),!1;for(let t=0;t<n.news.length;t++)n.news[t].id=t;n.deleteNews()}function y(s){const t=new Date(s),d=t.getDate(),i=t.getMonth()+1,o=t.getFullYear();return`${d<10?"0"+d:d}-${i<10?"0"+i:i}-${o}`}return(s,t)=>{const d=p("Loader"),i=p("router-link");return r(),b(w,null,[v(n).loading?(r(),$(d,{key:0})):f("",!0),F,e("div",V,[e("table",A,[e("tbody",null,[z,(r(!0),b(w,null,N(v(n).news,(o,m)=>(r(),b("tr",null,[e("td",null,c(m+1),1),e("td",null,[S(i,{to:{path:`/admin/news-pages/${o.nameNews}`}},{default:x(()=>[B(c(o.title),1)]),_:2},1032,["to"])]),e("td",null,c(y(o.date)),1),e("td",{class:_(["font-weight-bold",{"text-success":o.status,"text-danger":!o.status}])},c(o.status?"В проекте":"Остановлена"),3),e("td",null,[e("button",{class:_(["btn btn-block",{"btn-success":!o.status,"btn-danger":o.status}]),onClick:l=>{s.showModal=!0,s.currentIndex=m}},c(o.status?"Выключить":"Включить"),11,T)]),e("td",null,[e("button",{class:"btn btn-danger",onClick:l=>{s.newsIndex=m,s.deleteModal=!0}},"Удалить новость",8,j)]),e("div",{class:_(["modal fade show",{"d-block":s.showModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",E,[e("div",O,[e("div",Y,[q,e("button",{type:"button",class:"close",onClick:t[0]||(t[0]=l=>s.showModal=!1)},H)]),J,e("div",K,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=l=>s.showModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=l=>{g(s.currentIndex),s.showModal=!1})},"Да")])])])],2),e("div",{class:_(["modal fade show",{"d-block":s.deleteModal}]),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",P,[e("div",Q,[e("div",R,[U,e("button",{type:"button",class:"close",onClick:t[3]||(t[3]=l=>s.deleteModal=!1)},X)]),Z,e("div",ee,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[4]||(t[4]=l=>s.deleteModal=!1)},"Отмена"),e("button",{type:"button",class:"btn btn-danger",onClick:t[5]||(t[5]=l=>{k(s.newsIndex),s.deleteModal=!1})},"Да")])])])],2)]))),256))])]),h.value?(r(),b("div",te," Вы не можете удалить последнюю новость ")):f("",!0)])],64)}}}),ae=M(oe,[["__scopeId","data-v-a1c1b874"]]);export{ae as default};
